(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{174:function(t,e){var n=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;var i=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var u=Object.freeze({EPSILON:n,get ARRAY_TYPE(){return r},RANDOM:a,setMatrixArrayType:function(t){r=t},toRadian:function(t){return t*i},equals:function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))}});function o(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],h=n[3];return t[0]=r*o+i*s,t[1]=a*o+u*s,t[2]=r*c+i*h,t[3]=a*c+u*h,t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var c=o,h=s,l=Object.freeze({create:function(){var t=new r(4);return r!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,e,n,a){var i=new r(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=a,i},set:function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*i-a*r;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-a*u,t[3]=n*u,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:o,rotate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*o,t[1]=a*s+u*o,t[2]=r*-o+i*s,t[3]=a*-o+u*s,t},scale:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1];return t[0]=r*o,t[1]=a*o,t[2]=i*s,t[3]=u*s,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:s,exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],c=e[2],h=e[3];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=n*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(u-h)<=n*Math.max(1,Math.abs(u),Math.abs(h))},multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},mul:c,sub:h});function E(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],h=n[1],l=n[2],E=n[3],f=n[4],_=n[5];return t[0]=r*c+i*h,t[1]=a*c+u*h,t[2]=r*l+i*E,t[3]=a*l+u*E,t[4]=r*f+i*_+o,t[5]=a*f+u*_+s,t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var _=E,T=f,M=Object.freeze({create:function(){var t=new r(6);return r!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,e,n,a,i,u){var o=new r(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o[4]=i,o[5]=u,o},set:function(t,e,n,r,a,i,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t},invert:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=n*i-r*a;return s?(s=1/s,t[0]=i*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*o-i*u)*s,t[5]=(r*u-n*o)*s,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:E,rotate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=r*h+i*c,t[1]=a*h+u*c,t[2]=r*-c+i*h,t[3]=a*-c+u*h,t[4]=o,t[5]=s,t},scale:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],h=n[1];return t[0]=r*c,t[1]=a*c,t[2]=i*h,t[3]=u*h,t[4]=o,t[5]=s,t},translate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=n[0],h=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=r*c+i*h+o,t[5]=a*c+u*h+s,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},subtract:f,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],c=e[0],h=e[1],l=e[2],E=e[3],f=e[4],_=e[5];return Math.abs(r-c)<=n*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-h)<=n*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-l)<=n*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-E)<=n*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(o-f)<=n*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-_)<=n*Math.max(1,Math.abs(s),Math.abs(_))},mul:_,sub:T});function R(){var t=new r(9);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function A(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=e[8],E=n[0],f=n[1],_=n[2],T=n[3],M=n[4],R=n[5],A=n[6],v=n[7],m=n[8];return t[0]=E*r+f*u+_*c,t[1]=E*a+f*o+_*h,t[2]=E*i+f*s+_*l,t[3]=T*r+M*u+R*c,t[4]=T*a+M*o+R*h,t[5]=T*i+M*s+R*l,t[6]=A*r+v*u+m*c,t[7]=A*a+v*o+m*h,t[8]=A*i+v*s+m*l,t}function v(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var m=A,I=v,d=Object.freeze({create:R,fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,n,a,i,u,o,s,c){var h=new r(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=a,h[4]=i,h[5]=u,h[6]=o,h[7]=s,h[8]=c,h},set:function(t,e,n,r,a,i,u,o,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8],l=h*u-o*c,E=-h*i+o*s,f=c*i-u*s,_=n*l+r*E+a*f;return _?(_=1/_,t[0]=l*_,t[1]=(-h*r+a*c)*_,t[2]=(o*r-a*u)*_,t[3]=E*_,t[4]=(h*n-a*s)*_,t[5]=(-o*n+a*i)*_,t[6]=f*_,t[7]=(-c*n+r*s)*_,t[8]=(u*n-r*i)*_,t):null},adjoint:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8];return t[0]=u*h-o*c,t[1]=a*c-r*h,t[2]=r*o-a*u,t[3]=o*s-i*h,t[4]=n*h-a*s,t[5]=a*i-n*o,t[6]=i*c-u*s,t[7]=r*s-n*c,t[8]=n*u-r*i,t},determinant:function(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],c=t[8];return e*(c*i-u*s)+n*(-c*a+u*o)+r*(s*a-i*o)},multiply:A,translate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=e[8],E=n[0],f=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=E*r+f*u+c,t[7]=E*a+f*o+h,t[8]=E*i+f*s+l,t},rotate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=e[8],E=Math.sin(n),f=Math.cos(n);return t[0]=f*r+E*u,t[1]=f*a+E*o,t[2]=f*i+E*s,t[3]=f*u-E*r,t[4]=f*o-E*a,t[5]=f*s-E*i,t[6]=c,t[7]=h,t[8]=l,t},scale:function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n+n,o=r+r,s=a+a,c=n*u,h=r*u,l=r*o,E=a*u,f=a*o,_=a*s,T=i*u,M=i*o,R=i*s;return t[0]=1-l-_,t[3]=h-R,t[6]=E+M,t[1]=h+R,t[4]=1-c-_,t[7]=f-T,t[2]=E-M,t[5]=f+T,t[8]=1-c-l,t},normalFromMat4:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8],l=e[9],E=e[10],f=e[11],_=e[12],T=e[13],M=e[14],R=e[15],A=n*o-r*u,v=n*s-a*u,m=n*c-i*u,I=r*s-a*o,d=r*c-i*o,N=a*c-i*s,g=h*T-l*_,L=h*M-E*_,S=h*R-f*_,F=l*M-E*T,U=l*R-f*T,O=E*R-f*M,C=A*O-v*U+m*F+I*S-d*L+N*g;return C?(C=1/C,t[0]=(o*O-s*U+c*F)*C,t[1]=(s*S-u*O-c*L)*C,t[2]=(u*U-o*S+c*g)*C,t[3]=(a*U-r*O-i*F)*C,t[4]=(n*O-a*S+i*L)*C,t[5]=(r*S-n*U-i*g)*C,t[6]=(T*N-M*d+R*I)*C,t[7]=(M*m-_*N-R*v)*C,t[8]=(_*d-T*m+R*A)*C,t):null},projection:function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},subtract:v,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],c=t[6],h=t[7],l=t[8],E=e[0],f=e[1],_=e[2],T=e[3],M=e[4],R=e[5],A=e[6],v=e[7],m=e[8];return Math.abs(r-E)<=n*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(a-f)<=n*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-_)<=n*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-T)<=n*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(o-M)<=n*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(s-R)<=n*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(c-A)<=n*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(h-v)<=n*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(l-m)<=n*Math.max(1,Math.abs(l),Math.abs(m))},mul:m,sub:I});function N(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=e[8],E=e[9],f=e[10],_=e[11],T=e[12],M=e[13],R=e[14],A=e[15],v=n[0],m=n[1],I=n[2],d=n[3];return t[0]=v*r+m*o+I*l+d*T,t[1]=v*a+m*s+I*E+d*M,t[2]=v*i+m*c+I*f+d*R,t[3]=v*u+m*h+I*_+d*A,v=n[4],m=n[5],I=n[6],d=n[7],t[4]=v*r+m*o+I*l+d*T,t[5]=v*a+m*s+I*E+d*M,t[6]=v*i+m*c+I*f+d*R,t[7]=v*u+m*h+I*_+d*A,v=n[8],m=n[9],I=n[10],d=n[11],t[8]=v*r+m*o+I*l+d*T,t[9]=v*a+m*s+I*E+d*M,t[10]=v*i+m*c+I*f+d*R,t[11]=v*u+m*h+I*_+d*A,v=n[12],m=n[13],I=n[14],d=n[15],t[12]=v*r+m*o+I*l+d*T,t[13]=v*a+m*s+I*E+d*M,t[14]=v*i+m*c+I*f+d*R,t[15]=v*u+m*h+I*_+d*A,t}function L(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=r+r,s=a+a,c=i+i,h=r*o,l=r*s,E=r*c,f=a*s,_=a*c,T=i*c,M=u*o,R=u*s,A=u*c;return t[0]=1-(f+T),t[1]=l+A,t[2]=E-R,t[3]=0,t[4]=l-A,t[5]=1-(h+T),t[6]=_+M,t[7]=0,t[8]=E+R,t[9]=_-M,t[10]=1-(h+f),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function S(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function F(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],u=e[5],o=e[6],s=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,u,o),t[2]=Math.hypot(s,c,h),t}function U(t,e){var n=new r(3);F(n,e);var a=1/n[0],i=1/n[1],u=1/n[2],o=e[0]*a,s=e[1]*i,c=e[2]*u,h=e[4]*a,l=e[5]*i,E=e[6]*u,f=e[8]*a,_=e[9]*i,T=e[10]*u,M=o+l+T,R=0;return M>0?(R=2*Math.sqrt(M+1),t[3]=.25*R,t[0]=(E-_)/R,t[1]=(f-c)/R,t[2]=(s-h)/R):o>l&&o>T?(R=2*Math.sqrt(1+o-l-T),t[3]=(E-_)/R,t[0]=.25*R,t[1]=(s+h)/R,t[2]=(f+c)/R):l>T?(R=2*Math.sqrt(1+l-o-T),t[3]=(f-c)/R,t[0]=(s+h)/R,t[1]=.25*R,t[2]=(E+_)/R):(R=2*Math.sqrt(1+T-o-l),t[3]=(s-h)/R,t[0]=(f+c)/R,t[1]=(E+_)/R,t[2]=.25*R),t}function O(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var C=g,D=O,P=Object.freeze({create:function(){var t=new r(16);return r!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var e=new r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,e,n,a,i,u,o,s,c,h,l,E,f,_,T,M){var R=new r(16);return R[0]=t,R[1]=e,R[2]=n,R[3]=a,R[4]=i,R[5]=u,R[6]=o,R[7]=s,R[8]=c,R[9]=h,R[10]=l,R[11]=E,R[12]=f,R[13]=_,R[14]=T,R[15]=M,R},set:function(t,e,n,r,a,i,u,o,s,c,h,l,E,f,_,T,M){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=c,t[9]=h,t[10]=l,t[11]=E,t[12]=f,t[13]=_,t[14]=T,t[15]=M,t},identity:N,transpose:function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8],l=e[9],E=e[10],f=e[11],_=e[12],T=e[13],M=e[14],R=e[15],A=n*o-r*u,v=n*s-a*u,m=n*c-i*u,I=r*s-a*o,d=r*c-i*o,N=a*c-i*s,g=h*T-l*_,L=h*M-E*_,S=h*R-f*_,F=l*M-E*T,U=l*R-f*T,O=E*R-f*M,C=A*O-v*U+m*F+I*S-d*L+N*g;return C?(C=1/C,t[0]=(o*O-s*U+c*F)*C,t[1]=(a*U-r*O-i*F)*C,t[2]=(T*N-M*d+R*I)*C,t[3]=(E*d-l*N-f*I)*C,t[4]=(s*S-u*O-c*L)*C,t[5]=(n*O-a*S+i*L)*C,t[6]=(M*m-_*N-R*v)*C,t[7]=(h*N-E*m+f*v)*C,t[8]=(u*U-o*S+c*g)*C,t[9]=(r*S-n*U-i*g)*C,t[10]=(_*d-T*m+R*A)*C,t[11]=(l*m-h*d-f*A)*C,t[12]=(o*L-u*F-s*g)*C,t[13]=(n*F-r*L+a*g)*C,t[14]=(T*v-_*I-M*A)*C,t[15]=(h*I-l*v+E*A)*C,t):null},adjoint:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],c=e[7],h=e[8],l=e[9],E=e[10],f=e[11],_=e[12],T=e[13],M=e[14],R=e[15];return t[0]=o*(E*R-f*M)-l*(s*R-c*M)+T*(s*f-c*E),t[1]=-(r*(E*R-f*M)-l*(a*R-i*M)+T*(a*f-i*E)),t[2]=r*(s*R-c*M)-o*(a*R-i*M)+T*(a*c-i*s),t[3]=-(r*(s*f-c*E)-o*(a*f-i*E)+l*(a*c-i*s)),t[4]=-(u*(E*R-f*M)-h*(s*R-c*M)+_*(s*f-c*E)),t[5]=n*(E*R-f*M)-h*(a*R-i*M)+_*(a*f-i*E),t[6]=-(n*(s*R-c*M)-u*(a*R-i*M)+_*(a*c-i*s)),t[7]=n*(s*f-c*E)-u*(a*f-i*E)+h*(a*c-i*s),t[8]=u*(l*R-f*T)-h*(o*R-c*T)+_*(o*f-c*l),t[9]=-(n*(l*R-f*T)-h*(r*R-i*T)+_*(r*f-i*l)),t[10]=n*(o*R-c*T)-u*(r*R-i*T)+_*(r*c-i*o),t[11]=-(n*(o*f-c*l)-u*(r*f-i*l)+h*(r*c-i*o)),t[12]=-(u*(l*M-E*T)-h*(o*M-s*T)+_*(o*E-s*l)),t[13]=n*(l*M-E*T)-h*(r*M-a*T)+_*(r*E-a*l),t[14]=-(n*(o*M-s*T)-u*(r*M-a*T)+_*(r*s-a*o)),t[15]=n*(o*E-s*l)-u*(r*E-a*l)+h*(r*s-a*o),t},determinant:function(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],c=t[8],h=t[9],l=t[10],E=t[11],f=t[12],_=t[13],T=t[14],M=t[15];return(e*u-n*i)*(l*M-E*T)-(e*o-r*i)*(h*M-E*_)+(e*s-a*i)*(h*T-l*_)+(n*o-r*u)*(c*M-E*f)-(n*s-a*u)*(c*T-l*f)+(r*s-a*o)*(c*_-h*f)},multiply:g,translate:function(t,e,n){var r,a,i,u,o,s,c,h,l,E,f,_,T=n[0],M=n[1],R=n[2];return e===t?(t[12]=e[0]*T+e[4]*M+e[8]*R+e[12],t[13]=e[1]*T+e[5]*M+e[9]*R+e[13],t[14]=e[2]*T+e[6]*M+e[10]*R+e[14],t[15]=e[3]*T+e[7]*M+e[11]*R+e[15]):(r=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=e[8],E=e[9],f=e[10],_=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=c,t[7]=h,t[8]=l,t[9]=E,t[10]=f,t[11]=_,t[12]=r*T+o*M+l*R+e[12],t[13]=a*T+s*M+E*R+e[13],t[14]=i*T+c*M+f*R+e[14],t[15]=u*T+h*M+_*R+e[15]),t},scale:function(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate:function(t,e,r,a){var i,u,o,s,c,h,l,E,f,_,T,M,R,A,v,m,I,d,N,g,L,S,F,U,O=a[0],C=a[1],D=a[2],P=Math.hypot(O,C,D);return P<n?null:(O*=P=1/P,C*=P,D*=P,i=Math.sin(r),o=1-(u=Math.cos(r)),s=e[0],c=e[1],h=e[2],l=e[3],E=e[4],f=e[5],_=e[6],T=e[7],M=e[8],R=e[9],A=e[10],v=e[11],m=O*O*o+u,I=C*O*o+D*i,d=D*O*o-C*i,N=O*C*o-D*i,g=C*C*o+u,L=D*C*o+O*i,S=O*D*o+C*i,F=C*D*o-O*i,U=D*D*o+u,t[0]=s*m+E*I+M*d,t[1]=c*m+f*I+R*d,t[2]=h*m+_*I+A*d,t[3]=l*m+T*I+v*d,t[4]=s*N+E*g+M*L,t[5]=c*N+f*g+R*L,t[6]=h*N+_*g+A*L,t[7]=l*N+T*g+v*L,t[8]=s*S+E*F+M*U,t[9]=c*S+f*F+R*U,t[10]=h*S+_*F+A*U,t[11]=l*S+T*F+v*U,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},rotateX:function(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],u=e[5],o=e[6],s=e[7],c=e[8],h=e[9],l=e[10],E=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+c*r,t[5]=u*a+h*r,t[6]=o*a+l*r,t[7]=s*a+E*r,t[8]=c*a-i*r,t[9]=h*a-u*r,t[10]=l*a-o*r,t[11]=E*a-s*r,t},rotateY:function(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],u=e[1],o=e[2],s=e[3],c=e[8],h=e[9],l=e[10],E=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-c*r,t[1]=u*a-h*r,t[2]=o*a-l*r,t[3]=s*a-E*r,t[8]=i*r+c*a,t[9]=u*r+h*a,t[10]=o*r+l*a,t[11]=s*r+E*a,t},rotateZ:function(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],u=e[1],o=e[2],s=e[3],c=e[4],h=e[5],l=e[6],E=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+c*r,t[1]=u*a+h*r,t[2]=o*a+l*r,t[3]=s*a+E*r,t[4]=c*a-i*r,t[5]=h*a-u*r,t[6]=l*a-o*r,t[7]=E*a-s*r,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,e,r){var a,i,u,o=r[0],s=r[1],c=r[2],h=Math.hypot(o,s,c);return h<n?null:(o*=h=1/h,s*=h,c*=h,a=Math.sin(e),u=1-(i=Math.cos(e)),t[0]=o*o*u+i,t[1]=s*o*u+c*a,t[2]=c*o*u-s*a,t[3]=0,t[4]=o*s*u-c*a,t[5]=s*s*u+i,t[6]=c*s*u+o*a,t[7]=0,t[8]=o*c*u+s*a,t[9]=s*c*u-o*a,t[10]=c*c*u+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:L,fromQuat2:function(t,e){var n=new r(3),a=-e[0],i=-e[1],u=-e[2],o=e[3],s=e[4],c=e[5],h=e[6],l=e[7],E=a*a+i*i+u*u+o*o;return E>0?(n[0]=2*(s*o+l*a+c*u-h*i)/E,n[1]=2*(c*o+l*i+h*a-s*u)/E,n[2]=2*(h*o+l*u+s*i-c*a)/E):(n[0]=2*(s*o+l*a+c*u-h*i),n[1]=2*(c*o+l*i+h*a-s*u),n[2]=2*(h*o+l*u+s*i-c*a)),L(t,e,n),t},getTranslation:S,getScaling:F,getRotation:U,fromRotationTranslationScale:function(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=e[3],s=a+a,c=i+i,h=u+u,l=a*s,E=a*c,f=a*h,_=i*c,T=i*h,M=u*h,R=o*s,A=o*c,v=o*h,m=r[0],I=r[1],d=r[2];return t[0]=(1-(_+M))*m,t[1]=(E+v)*m,t[2]=(f-A)*m,t[3]=0,t[4]=(E-v)*I,t[5]=(1-(l+M))*I,t[6]=(T+R)*I,t[7]=0,t[8]=(f+A)*d,t[9]=(T-R)*d,t[10]=(1-(l+_))*d,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,a){var i=e[0],u=e[1],o=e[2],s=e[3],c=i+i,h=u+u,l=o+o,E=i*c,f=i*h,_=i*l,T=u*h,M=u*l,R=o*l,A=s*c,v=s*h,m=s*l,I=r[0],d=r[1],N=r[2],g=a[0],L=a[1],S=a[2],F=(1-(T+R))*I,U=(f+m)*I,O=(_-v)*I,C=(f-m)*d,D=(1-(E+R))*d,P=(M+A)*d,B=(_+v)*N,y=(M-A)*N,p=(1-(E+T))*N;return t[0]=F,t[1]=U,t[2]=O,t[3]=0,t[4]=C,t[5]=D,t[6]=P,t[7]=0,t[8]=B,t[9]=y,t[10]=p,t[11]=0,t[12]=n[0]+g-(F*g+C*L+B*S),t[13]=n[1]+L-(U*g+D*L+y*S),t[14]=n[2]+S-(O*g+P*L+p*S),t[15]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n+n,o=r+r,s=a+a,c=n*u,h=r*u,l=r*o,E=a*u,f=a*o,_=a*s,T=i*u,M=i*o,R=i*s;return t[0]=1-l-_,t[1]=h+R,t[2]=E-M,t[3]=0,t[4]=h-R,t[5]=1-c-_,t[6]=f+T,t[7]=0,t[8]=E+M,t[9]=f-T,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,a,i,u){var o=1/(n-e),s=1/(a-r),c=1/(i-u);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(n+e)*o,t[9]=(a+r)*s,t[10]=(u+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*c,t[15]=0,t},perspective:function(t,e,n,r,a){var i,u=1/Math.tan(e/2);return t[0]=u/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),s=2/(u+o),c=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-o)*s*.5,t[9]=(a-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},ortho:function(t,e,n,r,a,i,u){var o=1/(e-n),s=1/(r-a),c=1/(i-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*o,t[13]=(a+r)*s,t[14]=(u+i)*c,t[15]=1,t},lookAt:function(t,e,r,a){var i,u,o,s,c,h,l,E,f,_,T=e[0],M=e[1],R=e[2],A=a[0],v=a[1],m=a[2],I=r[0],d=r[1],g=r[2];return Math.abs(T-I)<n&&Math.abs(M-d)<n&&Math.abs(R-g)<n?N(t):(l=T-I,E=M-d,f=R-g,i=v*(f*=_=1/Math.hypot(l,E,f))-m*(E*=_),u=m*(l*=_)-A*f,o=A*E-v*l,(_=Math.hypot(i,u,o))?(i*=_=1/_,u*=_,o*=_):(i=0,u=0,o=0),s=E*o-f*u,c=f*i-l*o,h=l*u-E*i,(_=Math.hypot(s,c,h))?(s*=_=1/_,c*=_,h*=_):(s=0,c=0,h=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=u,t[5]=c,t[6]=E,t[7]=0,t[8]=o,t[9]=h,t[10]=f,t[11]=0,t[12]=-(i*T+u*M+o*R),t[13]=-(s*T+c*M+h*R),t[14]=-(l*T+E*M+f*R),t[15]=1,t)},targetTo:function(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=r[0],s=r[1],c=r[2],h=a-n[0],l=i-n[1],E=u-n[2],f=h*h+l*l+E*E;f>0&&(h*=f=1/Math.sqrt(f),l*=f,E*=f);var _=s*E-c*l,T=c*h-o*E,M=o*l-s*h;return(f=_*_+T*T+M*M)>0&&(_*=f=1/Math.sqrt(f),T*=f,M*=f),t[0]=_,t[1]=T,t[2]=M,t[3]=0,t[4]=l*M-E*T,t[5]=E*_-h*M,t[6]=h*T-l*_,t[7]=0,t[8]=h,t[9]=l,t[10]=E,t[11]=0,t[12]=a,t[13]=i,t[14]=u,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:O,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],c=t[6],h=t[7],l=t[8],E=t[9],f=t[10],_=t[11],T=t[12],M=t[13],R=t[14],A=t[15],v=e[0],m=e[1],I=e[2],d=e[3],N=e[4],g=e[5],L=e[6],S=e[7],F=e[8],U=e[9],O=e[10],C=e[11],D=e[12],P=e[13],B=e[14],y=e[15];return Math.abs(r-v)<=n*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(a-m)<=n*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-I)<=n*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(u-d)<=n*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(o-N)<=n*Math.max(1,Math.abs(o),Math.abs(N))&&Math.abs(s-g)<=n*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-L)<=n*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(h-S)<=n*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(l-F)<=n*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(E-U)<=n*Math.max(1,Math.abs(E),Math.abs(U))&&Math.abs(f-O)<=n*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(_-C)<=n*Math.max(1,Math.abs(_),Math.abs(C))&&Math.abs(T-D)<=n*Math.max(1,Math.abs(T),Math.abs(D))&&Math.abs(M-P)<=n*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(R-B)<=n*Math.max(1,Math.abs(R),Math.abs(B))&&Math.abs(A-y)<=n*Math.max(1,Math.abs(A),Math.abs(y))},mul:C,sub:D});function B(){var t=new r(3);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function y(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function p(t,e,n){var a=new r(3);return a[0]=t,a[1]=e,a[2]=n,a}function b(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function G(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function k(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function X(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function H(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function w(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function V(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Y(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[0],o=n[1],s=n[2];return t[0]=a*s-i*o,t[1]=i*u-r*s,t[2]=r*o-a*u,t}var q,W=b,K=G,Z=k,z=X,j=x,Q=y,J=H,$=(q=B(),function(t,e,n,r,a,i){var u,o;for(e||(e=3),n||(n=0),o=r?Math.min(r*e+n,t.length):t.length,u=n;u<o;u+=e)q[0]=t[u],q[1]=t[u+1],q[2]=t[u+2],a(q,q,i),t[u]=q[0],t[u+1]=q[1],t[u+2]=q[2];return t}),tt=Object.freeze({create:B,clone:function(t){var e=new r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length:y,fromValues:p,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:b,multiply:G,divide:k,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:X,squaredDistance:x,squaredLength:H,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:w,dot:V,cross:Y,lerp:function(t,e,n,r){var a=e[0],i=e[1],u=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=u+r*(n[2]-u),t},hermite:function(t,e,n,r,a,i){var u=i*i,o=u*(2*i-3)+1,s=u*(i-2)+i,c=u*(i-1),h=u*(3-2*i);return t[0]=e[0]*o+n[0]*s+r[0]*c+a[0]*h,t[1]=e[1]*o+n[1]*s+r[1]*c+a[1]*h,t[2]=e[2]*o+n[2]*s+r[2]*c+a[2]*h,t},bezier:function(t,e,n,r,a,i){var u=1-i,o=u*u,s=i*i,c=o*u,h=3*i*o,l=3*s*u,E=s*i;return t[0]=e[0]*c+n[0]*h+r[0]*l+a[0]*E,t[1]=e[1]*c+n[1]*h+r[1]*l+a[1]*E,t[2]=e[2]*c+n[2]*h+r[2]*l+a[2]*E,t},random:function(t,e){e=e||1;var n=2*a()*Math.PI,r=2*a()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},transformMat4:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[3]*r+n[7]*a+n[11]*i+n[15];return u=u||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/u,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/u,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/u,t},transformMat3:function(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t},transformQuat:function(t,e,n){var r=n[0],a=n[1],i=n[2],u=n[3],o=e[0],s=e[1],c=e[2],h=a*c-i*s,l=i*o-r*c,E=r*s-a*o,f=a*E-i*l,_=i*h-r*E,T=r*l-a*h,M=2*u;return h*=M,l*=M,E*=M,f*=2,_*=2,T*=2,t[0]=o+h+f,t[1]=s+l+_,t[2]=c+E+T,t},rotateX:function(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},rotateY:function(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},rotateZ:function(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},angle:function(t,e){var n=p(t[0],t[1],t[2]),r=p(e[0],e[1],e[2]);w(n,n),w(r,r);var a=V(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=e[0],o=e[1],s=e[2];return Math.abs(r-u)<=n*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-o)<=n*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))},sub:W,mul:K,div:Z,dist:z,sqrDist:j,len:Q,sqrLen:J,forEach:$});function et(){var t=new r(4);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function nt(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function rt(t,e,n,a){var i=new r(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=a,i}function at(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function it(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function ut(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function ot(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function st(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function ct(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function ht(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function lt(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,a,i)}function Et(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function ft(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function _t(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function Tt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*n+r*r+a*a+i*i;return u>0&&(u=1/Math.sqrt(u)),t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=i*u,t}function Mt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Rt(t,e,n,r){var a=e[0],i=e[1],u=e[2],o=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=u+r*(n[2]-u),t[3]=o+r*(n[3]-o),t}function At(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function vt(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],c=e[2],h=e[3];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=n*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(u-h)<=n*Math.max(1,Math.abs(u),Math.abs(h))}var mt=ot,It=st,dt=ct,Nt=lt,gt=Et,Lt=ft,St=_t,Ft=function(){var t=et();return function(e,n,r,a,i,u){var o,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,o=r;o<s;o+=n)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),Ut=Object.freeze({create:et,clone:nt,fromValues:rt,copy:at,set:it,add:ut,subtract:ot,multiply:st,divide:ct,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:ht,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},distance:lt,squaredDistance:Et,length:ft,squaredLength:_t,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:Tt,dot:Mt,cross:function(t,e,n,r){var a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],u=n[0]*r[3]-n[3]*r[0],o=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],h=e[0],l=e[1],E=e[2],f=e[3];return t[0]=l*c-E*s+f*o,t[1]=-h*c+E*u-f*i,t[2]=h*s-l*u+f*a,t[3]=-h*o+l*i-E*a,t},lerp:Rt,random:function(t,e){var n,r,i,u,o,s;e=e||1;do{o=(n=2*a()-1)*n+(r=2*a()-1)*r}while(o>=1);do{s=(i=2*a()-1)*i+(u=2*a()-1)*u}while(s>=1);var c=Math.sqrt((1-o)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*c,t[3]=e*u*c,t},transformMat4:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*u,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*u,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*u,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*u,t},transformQuat:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=n[0],o=n[1],s=n[2],c=n[3],h=c*r+o*i-s*a,l=c*a+s*r-u*i,E=c*i+u*a-o*r,f=-u*r-o*a-s*i;return t[0]=h*c+f*-u+l*-s-E*-o,t[1]=l*c+f*-o+E*-u-h*-s,t[2]=E*c+f*-s+h*-o-l*-u,t[3]=e[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:At,equals:vt,sub:mt,mul:It,div:dt,dist:Nt,sqrDist:gt,len:Lt,sqrLen:St,forEach:Ft});function Ot(){var t=new r(4);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ct(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Dt(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],h=n[3];return t[0]=r*h+u*o+a*c-i*s,t[1]=a*h+u*s+i*o-r*c,t[2]=i*h+u*c+r*s-a*o,t[3]=u*h-r*o-a*s-i*c,t}function Pt(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+u*o,t[1]=a*s+i*o,t[2]=i*s-a*o,t[3]=u*s-r*o,t}function Bt(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*o,t[1]=a*s+u*o,t[2]=i*s+r*o,t[3]=u*s-a*o,t}function yt(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*o,t[1]=a*s-r*o,t[2]=i*s+u*o,t[3]=u*s-i*o,t}function pt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=Math.sqrt(n*n+r*r+a*a),o=Math.exp(i),s=u>0?o*Math.sin(u)/u:0;return t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=o*Math.cos(u),t}function bt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=Math.sqrt(n*n+r*r+a*a),o=u>0?Math.atan2(u,i)/u:0;return t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function Gt(t,e,r,a){var i,u,o,s,c,h=e[0],l=e[1],E=e[2],f=e[3],_=r[0],T=r[1],M=r[2],R=r[3];return(u=h*_+l*T+E*M+f*R)<0&&(u=-u,_=-_,T=-T,M=-M,R=-R),1-u>n?(i=Math.acos(u),o=Math.sin(i),s=Math.sin((1-a)*i)/o,c=Math.sin(a*i)/o):(s=1-a,c=a),t[0]=s*h+c*_,t[1]=s*l+c*T,t[2]=s*E+c*M,t[3]=s*f+c*R,t}function kt(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,u=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*u+u]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+u]-e[3*u+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[u]=(e[3*u+a]+e[3*a+u])*n}return t}var Xt,xt,Ht,wt,Vt,Yt,qt=nt,Wt=rt,Kt=at,Zt=it,zt=ut,jt=Dt,Qt=ht,Jt=Mt,$t=Rt,te=ft,ee=te,ne=_t,re=ne,ae=Tt,ie=At,ue=vt,oe=(Xt=B(),xt=p(1,0,0),Ht=p(0,1,0),function(t,e,n){var r=V(e,n);return r<-.999999?(Y(Xt,xt,e),Q(Xt)<1e-6&&Y(Xt,Ht,e),w(Xt,Xt),Ct(t,Xt,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(Y(Xt,e,n),t[0]=Xt[0],t[1]=Xt[1],t[2]=Xt[2],t[3]=1+r,ae(t,t))}),se=(wt=Ot(),Vt=Ot(),function(t,e,n,r,a,i){return Gt(wt,e,a,i),Gt(Vt,n,r,i),Gt(t,wt,Vt,2*i*(1-i)),t}),ce=(Yt=R(),function(t,e,n,r){return Yt[0]=n[0],Yt[3]=n[1],Yt[6]=n[2],Yt[1]=r[0],Yt[4]=r[1],Yt[7]=r[2],Yt[2]=-e[0],Yt[5]=-e[1],Yt[8]=-e[2],ae(t,kt(t,Yt))}),he=Object.freeze({create:Ot,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:Ct,getAxisAngle:function(t,e){var r=2*Math.acos(e[3]),a=Math.sin(r/2);return a>n?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),r},getAngle:function(t,e){var n=Jt(t,e);return Math.acos(2*n*n-1)},multiply:Dt,rotateX:Pt,rotateY:Bt,rotateZ:yt,calculateW:function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},exp:pt,ln:bt,pow:function(t,e,n){return bt(t,e),Qt(t,t,n),pt(t,t),t},slerp:Gt,random:function(t){var e=a(),n=a(),r=a(),i=Math.sqrt(1-e),u=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=u*Math.sin(2*Math.PI*r),t[3]=u*Math.cos(2*Math.PI*r),t},invert:function(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],u=n*n+r*r+a*a+i*i,o=u?1/u:0;return t[0]=-n*o,t[1]=-r*o,t[2]=-a*o,t[3]=i*o,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat3:kt,fromEuler:function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),u=Math.cos(e),o=Math.sin(n),s=Math.cos(n),c=Math.sin(r),h=Math.cos(r);return t[0]=i*s*h-u*o*c,t[1]=u*o*h+i*s*c,t[2]=u*s*c-i*o*h,t[3]=u*s*h+i*o*c,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:qt,fromValues:Wt,copy:Kt,set:Zt,add:zt,mul:jt,scale:Qt,dot:Jt,lerp:$t,length:te,len:ee,squaredLength:ne,sqrLen:re,normalize:ae,exactEquals:ie,equals:ue,rotationTo:oe,sqlerp:se,setAxes:ce});function le(t,e,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],u=e[0],o=e[1],s=e[2],c=e[3];return t[0]=u,t[1]=o,t[2]=s,t[3]=c,t[4]=r*c+a*s-i*o,t[5]=a*c+i*u-r*s,t[6]=i*c+r*o-a*u,t[7]=-r*u-a*o-i*s,t}function Ee(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var fe=Kt;var _e=Kt;function Te(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[4],s=n[5],c=n[6],h=n[7],l=e[4],E=e[5],f=e[6],_=e[7],T=n[0],M=n[1],R=n[2],A=n[3];return t[0]=r*A+u*T+a*R-i*M,t[1]=a*A+u*M+i*T-r*R,t[2]=i*A+u*R+r*M-a*T,t[3]=u*A-r*T-a*M-i*R,t[4]=r*h+u*o+a*c-i*s+l*A+_*T+E*R-f*M,t[5]=a*h+u*s+i*o-r*c+E*A+_*M+f*T-l*R,t[6]=i*h+u*c+r*s-a*o+f*A+_*R+l*M-E*T,t[7]=u*h-r*o-a*s-i*c+_*A-l*T-E*M-f*R,t}var Me=Te;var Re=Jt;var Ae=te,ve=Ae,me=ne,Ie=me;var de=Object.freeze({create:function(){var t=new r(8);return r!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var e=new r(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues:function(t,e,n,a,i,u,o,s){var c=new r(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=a,c[4]=i,c[5]=u,c[6]=o,c[7]=s,c},fromRotationTranslationValues:function(t,e,n,a,i,u,o){var s=new r(8);s[0]=t,s[1]=e,s[2]=n,s[3]=a;var c=.5*i,h=.5*u,l=.5*o;return s[4]=c*a+h*n-l*e,s[5]=h*a+l*t-c*n,s[6]=l*a+c*e-h*t,s[7]=-c*t-h*e-l*n,s},fromRotationTranslation:le,fromTranslation:function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,e){var n=Ot();U(n,e);var a=new r(3);return S(a,e),le(t,n,a),t},copy:Ee,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,e,n,r,a,i,u,o,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t},getReal:fe,getDual:function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setReal:_e,setDual:function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation:function(t,e){var n=e[4],r=e[5],a=e[6],i=e[7],u=-e[0],o=-e[1],s=-e[2],c=e[3];return t[0]=2*(n*c+i*u+r*s-a*o),t[1]=2*(r*c+i*o+a*u-n*s),t[2]=2*(a*c+i*s+n*o-r*u),t},translate:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=.5*n[0],s=.5*n[1],c=.5*n[2],h=e[4],l=e[5],E=e[6],f=e[7];return t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=u*o+a*c-i*s+h,t[5]=u*s+i*o-r*c+l,t[6]=u*c+r*s-a*o+E,t[7]=-r*o-a*s-i*c+f,t},rotateX:function(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=o*u+h*r+s*i-c*a,E=s*u+h*a+c*r-o*i,f=c*u+h*i+o*a-s*r,_=h*u-o*r-s*a-c*i;return Pt(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=l*u+_*r+E*i-f*a,t[5]=E*u+_*a+f*r-l*i,t[6]=f*u+_*i+l*a-E*r,t[7]=_*u-l*r-E*a-f*i,t},rotateY:function(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=o*u+h*r+s*i-c*a,E=s*u+h*a+c*r-o*i,f=c*u+h*i+o*a-s*r,_=h*u-o*r-s*a-c*i;return Bt(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=l*u+_*r+E*i-f*a,t[5]=E*u+_*a+f*r-l*i,t[6]=f*u+_*i+l*a-E*r,t[7]=_*u-l*r-E*a-f*i,t},rotateZ:function(t,e,n){var r=-e[0],a=-e[1],i=-e[2],u=e[3],o=e[4],s=e[5],c=e[6],h=e[7],l=o*u+h*r+s*i-c*a,E=s*u+h*a+c*r-o*i,f=c*u+h*i+o*a-s*r,_=h*u-o*r-s*a-c*i;return yt(t,e,n),r=t[0],a=t[1],i=t[2],u=t[3],t[4]=l*u+_*r+E*i-f*a,t[5]=E*u+_*a+f*r-l*i,t[6]=f*u+_*i+l*a-E*r,t[7]=_*u-l*r-E*a-f*i,t},rotateByQuatAppend:function(t,e,n){var r=n[0],a=n[1],i=n[2],u=n[3],o=e[0],s=e[1],c=e[2],h=e[3];return t[0]=o*u+h*r+s*i-c*a,t[1]=s*u+h*a+c*r-o*i,t[2]=c*u+h*i+o*a-s*r,t[3]=h*u-o*r-s*a-c*i,o=e[4],s=e[5],c=e[6],h=e[7],t[4]=o*u+h*r+s*i-c*a,t[5]=s*u+h*a+c*r-o*i,t[6]=c*u+h*i+o*a-s*r,t[7]=h*u-o*r-s*a-c*i,t},rotateByQuatPrepend:function(t,e,n){var r=e[0],a=e[1],i=e[2],u=e[3],o=n[0],s=n[1],c=n[2],h=n[3];return t[0]=r*h+u*o+a*c-i*s,t[1]=a*h+u*s+i*o-r*c,t[2]=i*h+u*c+r*s-a*o,t[3]=u*h-r*o-a*s-i*c,o=n[4],s=n[5],c=n[6],h=n[7],t[4]=r*h+u*o+a*c-i*s,t[5]=a*h+u*s+i*o-r*c,t[6]=i*h+u*c+r*s-a*o,t[7]=u*h-r*o-a*s-i*c,t},rotateAroundAxis:function(t,e,r,a){if(Math.abs(a)<n)return Ee(t,e);var i=Math.hypot(r[0],r[1],r[2]);a*=.5;var u=Math.sin(a),o=u*r[0]/i,s=u*r[1]/i,c=u*r[2]/i,h=Math.cos(a),l=e[0],E=e[1],f=e[2],_=e[3];t[0]=l*h+_*o+E*c-f*s,t[1]=E*h+_*s+f*o-l*c,t[2]=f*h+_*c+l*s-E*o,t[3]=_*h-l*o-E*s-f*c;var T=e[4],M=e[5],R=e[6],A=e[7];return t[4]=T*h+A*o+M*c-R*s,t[5]=M*h+A*s+R*o-T*c,t[6]=R*h+A*c+T*s-M*o,t[7]=A*h-T*o-M*s-R*c,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},multiply:Te,mul:Me,scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},dot:Re,lerp:function(t,e,n,r){var a=1-r;return Re(e,n)<0&&(r=-r),t[0]=e[0]*a+n[0]*r,t[1]=e[1]*a+n[1]*r,t[2]=e[2]*a+n[2]*r,t[3]=e[3]*a+n[3]*r,t[4]=e[4]*a+n[4]*r,t[5]=e[5]*a+n[5]*r,t[6]=e[6]*a+n[6]*r,t[7]=e[7]*a+n[7]*r,t},invert:function(t,e){var n=me(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},length:Ae,len:ve,squaredLength:me,sqrLen:Ie,normalize:function(t,e){var n=me(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,a=e[1]/n,i=e[2]/n,u=e[3]/n,o=e[4],s=e[5],c=e[6],h=e[7],l=r*o+a*s+i*c+u*h;t[0]=r,t[1]=a,t[2]=i,t[3]=u,t[4]=(o-r*l)/n,t[5]=(s-a*l)/n,t[6]=(c-i*l)/n,t[7]=(h-u*l)/n}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals:function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],c=t[6],h=t[7],l=e[0],E=e[1],f=e[2],_=e[3],T=e[4],M=e[5],R=e[6],A=e[7];return Math.abs(r-l)<=n*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-E)<=n*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-f)<=n*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-_)<=n*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(o-T)<=n*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(s-M)<=n*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(c-R)<=n*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(h-A)<=n*Math.max(1,Math.abs(h),Math.abs(A))}});function Ne(){var t=new r(2);return r!=Float32Array&&(t[0]=0,t[1]=0),t}function ge(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Le(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Se(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Fe(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function Ue(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function Oe(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Ce(t){var e=t[0],n=t[1];return e*e+n*n}var De=Oe,Pe=ge,Be=Le,ye=Se,pe=Fe,be=Ue,Ge=Ce,ke=function(){var t=Ne();return function(e,n,r,a,i,u){var o,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,o=r;o<s;o+=n)t[0]=e[o],t[1]=e[o+1],i(t,t,u),e[o]=t[0],e[o+1]=t[1];return e}}(),Xe=Object.freeze({create:Ne,clone:function(t){var e=new r(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var n=new r(2);return n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:ge,multiply:Le,divide:Se,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},distance:Fe,squaredDistance:Ue,length:Oe,squaredLength:Ce,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},lerp:function(t,e,n,r){var a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t},random:function(t,e){e=e||1;var n=2*a()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},transformMat2:function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},transformMat2d:function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},transformMat3:function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},transformMat4:function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},rotate:function(t,e,n,r){var a=e[0]-n[0],i=e[1]-n[1],u=Math.sin(r),o=Math.cos(r);return t[0]=a*o-i*u+n[0],t[1]=a*u+i*o+n[1],t},angle:function(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],u=n*n+r*r;u>0&&(u=1/Math.sqrt(u));var o=a*a+i*i;o>0&&(o=1/Math.sqrt(o));var s=(n*a+r*i)*u*o;return s>1?0:s<-1?Math.PI:Math.acos(s)},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals:function(t,e){var r=t[0],a=t[1],i=e[0],u=e[1];return Math.abs(r-i)<=n*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n*Math.max(1,Math.abs(a),Math.abs(u))},len:De,sub:Pe,mul:Be,div:ye,dist:pe,sqrDist:be,sqrLen:Ge,forEach:ke});e.glMatrix=u,e.mat2=l,e.mat2d=M,e.mat3=d,e.mat4=P,e.quat=he,e.quat2=de,e.vec2=Xe,e.vec3=tt,e.vec4=Ut},175:function(t,e,n){"use strict";n.r(e);var r=n(7),a=n.n(r),i=n(11),u=n.n(i),o=function(){function t(){a()(this,t)}return u()(t,null,[{key:"createWebglContext",value:function(t,e){return t.getContext("webgl2",e)}},{key:"loaderShader",value:function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}},{key:"createProgram",value:function(e,n,r){var a=this.loaderShader(e,e.VERTEX_SHADER,n),i=this.loaderShader(e,e.FRAGMENT_SHADER,r),u=e.createProgram();return e.attachShader(u,a),e.attachShader(u,i),e.linkProgram(u),e.getProgramParameter(u,e.LINK_STATUS)?(t.deleteShader(e,a),t.deleteShader(e,i),u):(e.deleteProgram(u),console.error("Unable to initialize the shader program: "+e.getProgramInfoLog(u)),null)}},{key:"createUniformsInfo",value:function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=[],a=0;a<n;++a){var i=t.getActiveUniform(e,a);if(!i)break;r.push(i)}return r}},{key:"createAttributesInfo",value:function(t,e){for(var n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=[],a=0;a<n;++a){var i=t.getActiveAttrib(e,a);if(!i)break;r.push(i)}return r}},{key:"createProgramInfo",value:function(t,e,n){var r=this.createProgram(t,e,n);return{program:r,uniformsInfo:this.createUniformsInfo(t,r),attributesInfo:this.createAttributesInfo(t,r)}}},{key:"createTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.CLAMP_TO_EDGE,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,u=e?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=t.createTexture();return t.bindTexture(u,o),t.texParameteri(u,t.TEXTURE_WRAP_S,n||t.CLAMP_TO_EDGE),t.texParameteri(u,t.TEXTURE_WRAP_T,r||t.CLAMP_TO_EDGE),t.texParameteri(u,t.TEXTURE_MIN_FILTER,a||t.LINEAR),t.texParameteri(u,t.TEXTURE_MAG_FILTER,i||t.LINEAR),e&&t.texParameteri(u,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),o}},{key:"createRenderTarget",value:function(t,e,n){var r={frameBuffer:t.createFramebuffer(),renderBuffer:t.createRenderbuffer()};return this.resizeRenderTarget(t,r,e,n),r}},{key:"createVao",value:function(t){return t.createVertexArray()}},{key:"updateVao",value:function(t,e,n,r){t.bindVertexArray(e);var a=[];if(Object.values(n).forEach((function(e,n){var r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e.data,t.STATIC_DRAW),t.vertexAttribPointer(n,e.componentL,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),a.push(r)})),r){var i=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r.data,t.STATIC_DRAW),a.push(i)}return t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null),a.forEach((function(e){t.deleteBuffer(e)})),e}},{key:"updateTexture2D",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,u=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=0,h=o||t.UNSIGNED_BYTE,l=r||t.RGBA,E=u||t.RGBA;t.bindTexture(t.TEXTURE_2D,e),a>-1&&i>-1?t.texImage2D(t.TEXTURE_2D,c,l,a,i,0,E,h,n):t.texImage2D(t.TEXTURE_2D,c,l,E,h,n),s>0&&a>-1&&i>-1&&t.texStorage2D(t.TEXTURE_2D,s,l,a,i)}},{key:"updateTextureCube",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,u=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=0,h=o||t.UNSIGNED_BYTE,l=r||t.RGBA,E=u||t.RGBA;if(t.bindTexture(t.TEXTURE_CUBE_MAP,e),a>-1&&i>-1)for(var f=0;f<6;++f)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+f,c,l,a,i,0,E,h,n[f]||null);else for(var _=0;_<6;++_)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_,c,l,E,h,n[_]);s>0&&a>-1&&i>-1&&t.texStorage2D(t.TEXTURE_CUBE_MAP,s,l,a,i)}},{key:"bindRenderTargetTexture",value:function(t,e,n){var r=e?e.frameBuffer:{frameBuffer:null};t.bindFramebuffer(t.FRAMEBUFFER,r),n&&t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}},{key:"bindRenderTargetTextureCube",value:function(t,e,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=e?e.frameBuffer:null;t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+r,n,a)}},{key:"resizeRenderTarget",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer),t.bindRenderbuffer(t.RENDERBUFFER,e.renderBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.renderBuffer),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}},{key:"deleteShader",value:function(t,e){t.deleteShader(e)}},{key:"deleteVao",value:function(t,e){t.deleteVertexArray(e)}}]),t}(),s=function(){function t(e){a()(this,t);for(var n={},r=arguments.length,i=new Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];n.alpha=void 0!==i.alpha&&i.alpha,n.depth=void 0===i.depth||i.depth,n.stencil=void 0===i.stencil||i.stencil,n.antialias=void 0===i.antialias||i.antialias,n.premultipliedAlpha=void 0===i.premultipliedAlpha||i.premultipliedAlpha,n.preserveDrawingBuffer=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,n.powerPreference=void 0!==i.powerPreference?i.powerPreference:"default",this._gl=o.createWebglContext(e,n),this.curProgram=null}return u()(t,[{key:"getContext",value:function(){return this._gl}},{key:"createTexture2D",value:function(t){var e=t.image,n=t.internalFormat,r=t.width,a=t.height,i=t.format,u=t.type,s=t.levels,c=t.ws,h=t.wt,l=t.minF,E=t.maxF,f=this._gl,_=o.createTexture(f,!1,c,h,l,E);return o.updateTexture2D(f,_,e,n,r,a,i,u,s),_}},{key:"createTextureCube",value:function(t){var e=t.imageArr,n=t.internalFormat,r=t.width,a=t.height,i=t.format,u=t.type,s=t.levels,c=t.ws,h=t.wt,l=t.minF,E=t.maxF,f=this._gl,_=o.createTexture(f,!0,c,h,l,E);return o.updateTextureCube(f,_,e,n,r,a,i,u,s),_}},{key:"updateTexture2D",value:function(t){var e=t.textureBuffer,n=t.image,r=t.internalFormat,a=t.width,i=t.height,u=t.format,s=t.type,c=t.levels;o.updateTexture2D(this._gl,e,n,r,a,i,u,s,c)}},{key:"setTexture2D",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._gl;n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t)}},{key:"setTextureCube",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._gl;n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_CUBE_MAP,t)}},{key:"generateMipmap",value:function(t,e){var n=this._gl;n.bindTexture(t,e),n.generateMipmap(t,e)}},{key:"copyTexture",value:function(t){var e=t.textureBuffer,n=t.target,r=t.texTarget,a=t.level,i=void 0===a?0:a,u=(t.internalFormat,t.x),o=void 0===u?0:u,s=t.y,c=void 0===s?0:s,h=t.width,l=void 0===h?512:h,E=t.height,f=void 0===E?512:E,_=t.border,T=void 0===_?0:_,M=this._gl,R=M.RGBA;M.bindTexture(n,e),M.copyTexImage2D(r,i,R,o,c,l,f,T)}},{key:"createProgramInfo",value:function(t,e){return o.createProgramInfo(this._gl,t,e)}},{key:"createProgram",value:function(t,e){return o.createProgram(this._gl,t,e)}},{key:"createRenderTarget",value:function(t,e){return o.createRenderTarget(this._gl,t,e)}},{key:"use",value:function(t){this.curProgram=t,this._gl.useProgram(t)}},{key:"createVao",value:function(){return o.createVao(this._gl)}},{key:"updateVao",value:function(t,e,n){return o.updateVao(this._gl,t,e,n)}},{key:"setUniforms",value:function(t){for(var e in t){var n=t[e],r=n.type,a=n.data;this["set_".concat(r)](e,a)}}},{key:"set_int",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniform1i(r,e)}},{key:"set_float",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniform1f(r,e)}},{key:"set_vec2",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniform2fv(r,e)}},{key:"set_vec3",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniform3fv(r,e)}},{key:"set_vec4",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniform4fv(r,e)}},{key:"set_mat3",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniformMatrix3fv(r,!1,e)}},{key:"set_mat4",value:function(t,e){var n=this._gl,r=n.getUniformLocation(this.curProgram,t);n.uniformMatrix4fv(r,!1,e)}},{key:"setRenderTarget",value:function(t,e){o.bindRenderTargetTexture(this._gl,t,e)}},{key:"setCubeRenderTarget",value:function(t,e,n,r){o.bindRenderTargetTextureCube(this._gl,t,e,n,r)}},{key:"resizeRenderTarget",value:function(t,e,n){o.resizeRenderTarget(this._gl,t,e,n)}},{key:"setVao",value:function(t){this._gl.bindVertexArray(t)}},{key:"unBindRenderTarget",value:function(){var t=this._gl;t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"drawElements",value:function(t){var e=this._gl,n=e.UNSIGNED_SHORT;e.drawElements(e.TRIANGLES,t,n,0)}},{key:"drawArray",value:function(t){var e=this._gl,n=e.TRIANGLES;e.drawArrays(n,0,t)}},{key:"viewport",value:function(t,e,n,r){this._gl.viewport(t,e,n,r)}},{key:"setClearColor",value:function(t,e,n,r){this._gl.clearColor(t,e,n,r)}},{key:"clear",value:function(t){this._gl.clear(t)}},{key:"clearBufferfv",value:function(t){this._gl.clearBufferfv(t,0,[.3,.3,.3,1])}},{key:"enableDepthTest",value:function(t){var e=this._gl;t?(e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL)):e.disable(e.DEPTH_TEST)}},{key:"enableCullFace",value:function(t){var e=this._gl;t?(e.enable(e.CULL_FACE),e.cullFace(e.BACK)):e.disable(e.CULL_FACE)}},{key:"deleteVao",value:function(t){o.deleteVao(this._gl,t)}},{key:"deleteProgram",value:function(t){o.deleteProgram(this._gl,t)}},{key:"deleteBuffer",value:function(t){this._gl.deleteBuffer(t)}},{key:"deleteTexture",value:function(t){this._gl.deleteTexture(t)}},{key:"deleteShader",value:function(t){this._gl.deleteShader(t)}},{key:"deleteFramebuffer",value:function(t){this._gl.deleteFramebuffer(t)}},{key:"deleteRenderbuffer",value:function(t){this._gl.deleteRenderbuffer(t)}},{key:"disposeContext",value:function(){this._gl.getExtension("WEBGL_lose_context").loseContext()}}]),t}(),c=n(15),h=n.n(c),l=function t(){a()(this,t)};h()(l,"DIRECTIONAL_LIGHT_NODE","directional light node"),h()(l,"POINT_LIGHT_NODE","point light node"),h()(l,"SPOT_LIGHT_NODE","spot light node"),h()(l,"AMBIENT_LIGHT_NODE","ambient light node"),h()(l,"CAMERA_NODE","camera node"),h()(l,"NODE","node");var E=function t(){a()(this,t)};h()(E,"POINT_LIGHT_NODE","point light node"),h()(E,"CAMERA_NODE","camera node"),h()(E,"NODE","node");var f=function t(){a()(this,t)};h()(f,"POINT_LIGHT_NUM","POINT_LIGHT_NUM"),h()(f,"DIRECTIONAL_LIGHT_NUM","DIRECTIONAL_LIGHT_NUM"),h()(f,"SPOT_LIGHT_NUM","SPOT_LIGHT_NUM"),h()(f,"AMBIENT_LIGHT_NUM","AMBIENT_LIGHT_NUM"),h()(f,"MATERIAL_TYPE","MATERIAL_TYPE"),h()(f,"RESULT","result"),h()(f,"VIEW_DIR","view_dir"),h()(f,"FRAG_COLOR","FragColor"),h()(f,"GL_POSITION","gl_Position");var _=function(){function t(){a()(this,t),this.uniforms={}}return u()(t,null,[{key:"create",value:function(){return new t}}]),u()(t,[{key:"use",value:function(t){this.uniforms=t}},{key:"merge",value:function(t){return Object.assign(this.uniforms,t),this}}]),t}(),T=function(){function t(){a()(this,t),this.attributes={},this.indices=null}return u()(t,null,[{key:"create",value:function(){return new t}}]),u()(t,[{key:"use",value:function(t){return this.attributes=t,this}},{key:"merge",value:function(t){return Object.assign(this.attributes,t),this}},{key:"addIndices",value:function(t){return this.indices=t,this}}]),t}(),M=function t(){a()(this,t)};h()(M,"BASE","base"),h()(M,"PHONG","phong");var R=function(){function t(){var e;a()(this,t),this.data=(e={},h()(e,f.POINT_LIGHT_NUM,0),h()(e,f.MATERIAL_TYPE,M.BASE),e)}return u()(t,null,[{key:"create",value:function(){return new t}}]),u()(t,[{key:"set",value:function(t,e){return this.data[t]=e,this}},{key:"getHeaderInfo",value:function(){return this.data}}]),t}(),A=function t(){a()(this,t)};h()(A,"INT","int"),h()(A,"FLOAT","float"),h()(A,"MAT3","mat3"),h()(A,"MAT4","mat4"),h()(A,"VEC2","vec2"),h()(A,"VEC3","vec3"),h()(A,"VEC4","vec4");var v,m={common_vert_params:"uniform mat4 projection;\nuniform mat4 model;\nuniform mat4 view;\nlayout (location = 0) in vec3 aPosition;\n",common_frag_params:"#define PI 3.141592653589793\nout vec4 FragColor; \n",common_frag:"FragColor = vec4(0.0);\n",projection_vert:"gl_Position = projection  * view * model* vec4(aPosition,1.); \n",light_vert_params:"#ifdef USE_LIGHT\nlayout (location = 1)  in vec3 aNormal;\nout vec3 vNormal;\nout vec3 vPosition;\nuniform mat3 normalMatrix ;\n#endif \n",light_vert:"#ifdef USE_LIGHT\nvNormal = normalMatrix * aNormal;\nvPosition = vec3(model * vec4(aPosition,1.));\n#endif \n",light_frag_params:"#ifdef USE_LIGHT\nin vec3 vNormal;\nin vec3 vPosition;\nuniform vec3 eye;\nuniform vec4 diffuse;\nuniform vec4 specular;\nuniform float shininess;\n#endif \n",light_frag:"#ifdef USE_LIGHT\nvec3 viewDir = normalize(eye - vPosition);\n#endif \n",point_light_frag_params:"#ifdef POINT_LIGHT_NUM\nstruct PointLight {\n  float constant;\n  float linear;\n  float quadratic;\n  float intensity;\n  vec3 position;\n  vec4 diffuse;\n  vec4 specular;\n};\nuniform PointLight pointLights[POINT_LIGHT_NUM]; \nvec4 calcPointLight( \n                   PointLight pointLights[POINT_LIGHT_NUM]\n                   ,vec3 viewDir\n                   ,vec3 vNormal\n                   ,vec3 vPosition\n                   ,vec4 diffuse\n                   ,vec4 specular\n                   ,float shininess){\n   vec4 resultColor = vec4(0.);\n   for(int i=0;i<POINT_LIGHT_NUM ;i++){\n         PointLight light = pointLights[i];\n         vec3 posToLight = light.position - vPosition;\n         float distance = length(posToLight);\n         vec3 lightDir = normalize(posToLight);\n         float diff = max(dot(vNormal,lightDir),0.0);\n         vec3 reflectDir = reflect(-lightDir, vNormal);\n         float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);\n         float attenuation = 1.0 / (light.constant + light.linear * distance+ light.quadratic * (distance * distance));\n         diffuse  =  diff * light.diffuse * diffuse;\n         specular =  spec * light.specular * specular;\n         resultColor += (diffuse + specular)* attenuation * light.intensity;\n   }\n   return resultColor; \n} \n#endif \n",point_light_frag:"#ifdef POINT_LIGHT_NUM \n   FragColor += calcPointLight(pointLights,viewDir,vNormal,vPosition,diffuse,specular,shininess); \n#endif \n",spot_light_frag_params:"#ifdef SPOT_LIGHT_NUM\nstruct SpotLight {\n  float constant;\n  float linear;\n  float quadratic;\n  float intensity;\n  vec3 position;\n  vec3 dir;\n  vec4 cutOff;\n  vec4 outerCutOff;\n  vec4 diffuse;\n  vec4 specular;\n};\nuniform SpotLight spotLights[SPOT_LIGHT_NUM]; \nvec4 calcSpotLight( \n                   SpotLight spotLights[SPOT_LIGHT_NUM]\n                   ,vec3 viewDir\n                   ,vec3 vNormal\n                   ,vec3 vPosition\n                   ,vec4 diffuse\n                   ,vec4 specular\n                   ,float shininess){\n   vec4 resultColor = vec4(0.);\n   for(int i=0;i<POINT_LIGHT_NUM ;i++){\n         SpotLight light = spotLights[i];\n         vec3 posToLight = light.position - vPosition;\n         float distance = length(posToLight);\n         vec3 lightDir = normalize(posToLight);\n         float diff = max(dot(vNormal,lightDir),0.0);\n         vec3 reflectDir = reflect(-lightDir, vNormal);\n         float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);\n         float attenuation = 1.0 / (light.constant + light.linear * distance+ light.quadratic * (distance * distance));\n         float theta = dot(lightDir, normalize(-light.dir));\n         float epsilon = light.cutOff - light.outerCutOff;\n         float intensity = clamp((theta - light.outerCutOff) / epsilon, 0.0, 1.0);\n         diffuse  =  diff * light.diffuse * diffuse;\n         specular =  spec * light.specular * specular;\n         resultColor += (diffuse + specular)* attenuation * intensity * light.intensity;\n   }\n   return resultColor; \n} \n#endif \n",spot_light_frag:"#ifdef SPOT_LIGHT_NUM \n   FragColor += calcSpotLight(spotLights,viewDir,vNormal,vPosition,diffuse,specular,shininess); \n#endif \n",directional_light_frag_params:"#ifdef DIRECTIONAL_LIGHT_NUM\nstruct DirectionalLight {\n  vec4 diffuse;\n  vec4 specular;\n  vec3 dir;\n  float intensity;\n};\nuniform DirectionalLight directionalLights[DIRECTIONAL_LIGHT_NUM]; \nvec4 calcDirectionalLight( \n                   DirectionalLight directionalLights[DIRECTIONAL_LIGHT_NUM]\n                   ,vec3 viewDir\n                   ,vec3 vNormal\n                   ,vec4 diffuse\n                   ,vec4 specular\n                   ,float shininess){\n   vec4 resultColor = vec4(0.);\n   for(int i=0;i<DIRECTIONAL_LIGHT_NUM ;i++){\n         DirectionalLight light = directionalLights[i];\n         vec3 lightDir = normalize(-light.dir);\n         vec3 reflectDir = reflect(-lightDir, vNormal);\n         float diff = max(dot(vNormal,lightDir),0.0);\n         float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);\n         diffuse =  diff * light.diffuse * diffuse;\n         specular =  spec * light.specular * specular;\n         resultColor += (diffuse + specular) * light.intensity;\n   }\n   return resultColor; \n} \n#endif \n",directional_light_frag:"#ifdef DIRECTIONAL_LIGHT_NUM \n   FragColor += calcDirectionalLight(directionalLights,viewDir,vNormal,diffuse,specular,shininess); \n#endif \n",ambient_light_frag_params:"#ifdef AMBIENT_LIGHT_NUM\nstruct AmbientLight {\n  vec4 diffuse;\n  float intensity;\n};\nuniform AmbientLight ambientLights[AMBIENT_LIGHT_NUM]; \nvec4 calcAmbientLight( \n                   AmbientLight ambientLights[AMBIENT_LIGHT_NUM]\n                   ,vec4 diffuse){\n   vec4 resultColor = vec4(0.);\n   for(int i=0;i<AMBIENT_LIGHT_NUM ;i++){\n         AmbientLight light = ambientLights[i];\n         resultColor += light.diffuse * light.intensity * diffuse;\n   }\n   return resultColor; \n} \n#endif \n",ambient_light_frag:"#ifdef AMBIENT_LIGHT_NUM \n   FragColor += calcAmbientLight(ambientLights,diffuse); \n#endif \n",base_material_vs:"#include <common_vert_params>void main(){\n   #include <projection_vert>}\n",base_material_fs:"#include <common_frag_params>void main(){ \n    #include <common_frag>}\n",phong_material_vs:"#include <common_vert_params>#include <light_vert_params>void main(){\n   #include <light_vert>   #include <projection_vert>}\n",phong_material_fs:"#include <common_frag_params>#include <light_frag_params>#include <ambient_light_frag_params>#include <directional_light_frag_params>#include <point_light_frag_params>#include <spot_light_frag_params>void main(){ \n    #include <common_frag>   #include <light_frag>   #include <ambient_light_frag>   #include <directional_light_frag>   #include <point_light_frag>   #include <spot_light_frag>}\n"},I=(v={},h()(v,M.BASE,{vertexShader:m.base_material_vs,fragmentShader:m.base_material_fs}),h()(v,M.PHONG,{vertexShader:m.phong_material_vs,fragmentShader:m.phong_material_fs}),v),d=new(function(){function t(e,n){a()(this,t),this.source=e,this.chunks=n}return u()(t,[{key:"preCompiler",value:function(){var t=this.chunks;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.vertexShader=this.resolveIncludes(n.vertexShader),n.fragmentShader=this.resolveIncludes(n.fragmentShader)}}},{key:"resolveIncludes",value:function(t){var e=this;return t.replace(/#include +<([\w\d./]+)>/gm,(function(n,r){var a=e.source[r];if(void 0===t)throw new Error("Can not resolve #include <"+r+">");return a}))}},{key:"get",value:function(t){return this.chunks[t]}}]),t}())(m,I);d.preCompiler();var N=d,g=function(){function t(e,n,r){a()(this,t),this.vs="",this.fs="",this.headerChunk=e,this.uniformChunk=n,this.attributeChunk=r}return u()(t,null,[{key:"create",value:function(e,n,r){var a=new t(e,n,r);return a.compiler(),a}}]),u()(t,[{key:"compiler",value:function(){this.compilerPre(),this.compilerBody()}},{key:"compilerPre",value:function(){var t="#version 300 es\n",e="#version 300 es\n precision  highp float;\n",n=this.headerChunk.getHeaderInfo();if(n[f.MATERIAL_TYPE]!==M.BASE){var r=n[f.AMBIENT_LIGHT_NUM]||0,a=n[f.DIRECTIONAL_LIGHT_NUM]||0,i=n[f.POINT_LIGHT_NUM]||0,u=n[f.SPOT_LIGHT_NUM]||0;r+a+i+u>0&&(t+="#define USE_LIGHT \n",e+="#define USE_LIGHT \n"),r>0&&(e+="#define AMBIENT_LIGHT_NUM ".concat(r," \n")),a>0&&(e+="#define DIRECTIONAL_LIGHT_NUM ".concat(a," \n")),i>0&&(e+="#define POINT_LIGHT_NUM ".concat(i," \n")),u>0&&(e+="#define SPOT_LIGHT_NUM ".concat(u," \n"))}this.vs=t,this.fs=e}},{key:"compilerBody",value:function(){var t=this.headerChunk.getHeaderInfo()[f.MATERIAL_TYPE],e=N.get(t);this.vs+=e.vertexShader,this.fs+=e.fragmentShader}}]),t}(),L=function(){function t(e,n){a()(this,t),this.manager=e,this.webglState=n,this.node=null,this.headerChunk=null,this.attributeChunk=T.create(),this.uniformChunk=_.create(),this.programInfo=null,this.vao=null}return u()(t,null,[{key:"create",value:function(e,n){return new t(e,n)}}]),u()(t,[{key:"parse",value:function(t,e,n,r){this.parseNode(t),this.parseGlobal(e,n,r),this.createProgram(),this.createVao(),this.updateCap(),this.updateProgram()}},{key:"parseNode",value:function(t){var e=this.uniformChunk,n=this.attributeChunk;this.node=t,e.use(t.getUniforms()),n.use(t.getAttributes()).addIndices(t.getIndices())}},{key:"parseGlobal",value:function(t,e,n){var r=this.uniformChunk;this.headerChunk=t,r.merge(n.uniforms)}},{key:"createProgram",value:function(){var t=this.webglState,e=this.manager,n=this.headerChunk.data,r=n[f.POINT_LIGHT_NUM]+n[f.MATERIAL_TYPE],a=e.programInfos[r];if(!a){var i=g.create(this.headerChunk,this.uniformChunk,this.attributeChunk);a=t.createProgramInfo(i.vs,i.fs),e.programInfos[r]=a}this.programInfo=a}},{key:"createVao",value:function(){var t=this.webglState,e=this.manager,n=this.node.mesh.id,r=e.vaos[n];r||(r=t.createVao(),e.vaos[n]=r),this.vao=r}},{key:"updateCap",value:function(){var t=this.webglState;t.enableDepthTest(!0),t.enableCullFace(!0)}},{key:"updateProgram",value:function(){var t=this.webglState,e=this.attributeChunk,n=this.uniformChunk,r=this.programInfo,a=r.program,i=(r.uniformsInfo,r.attributesInfo,e.attributes),u=n.uniforms;t.use(a),t.updateVao(this.vao,i,e.indices),t.setUniforms(u)}},{key:"draw",value:function(){var t=this.webglState,e=this.vao;t.setVao(e),t.drawElements(this.attributeChunk.indices.data.length)}},{key:"dispose",value:function(){var t=this.webglState,e=this.programInfo,n=this.vao;t.deleteProgram(e.program),t.deleteVao(n)}}]),t}(),S=function(){function t(){a()(this,t),this.manager=null,this.webglState=null,this.uniformChunk=_.create(),this.attributeChunk=T.create(),this.headerChunk=R.create()}return u()(t,null,[{key:"create",value:function(e,n){var r=new t;return r.manager=e,r.webglState=n,r}}]),u()(t,[{key:"useCamera",value:function(t){this.uniformChunk.merge(t.getUniforms())}},{key:"useLights",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=this.uniformChunk,i=this.headerChunk;t.length&&i.set(f.AMBIENT_LIGHT_NUM,t.length),e.length&&i.set(f.DIRECTIONAL_LIGHT_NUM,e.length),n.length&&i.set(f.POINT_LIGHT_NUM,n.length),r.length&&i.set(f.SPOT_LIGHT_NUM,r.length),t.forEach((function(t,e){a.merge(t.getUniforms(e))})),e.forEach((function(t,e){a.merge(t.getUniforms(e))})),n.forEach((function(t,e){a.merge(t.getUniforms(e))})),r.forEach((function(t,e){a.merge(t.getUniforms(e))}))}},{key:"useNodes",value:function(t){var e=this.manager,n=this.webglState,r=this.uniformChunk,a=this.attributeChunk,i=this.headerChunk;t.forEach((function(t){i.set(f.MATERIAL_TYPE,t.getMaterialType());var u=L.create(e,n);u.parse(t,i,a,r),u.draw()}))}}]),t}(),F=function(){function t(e,n){a()(this,t),this.manager=e,this.canvas=n||document.createElement("canvas"),this.state=new s(this.canvas),this._renderStates={}}return u()(t,null,[{key:"create",value:function(e,n){var r=new t(e,n);return r.resize(),r}}]),u()(t,[{key:"render",value:function(t){var e=t.getRootNode(),n={};e.traverse((function(t){n[t.type]||(n[t.type]=[]),n[t.type].push(t)}));var r=n[l.CAMERA_NODE],a=n[l.AMBIENT_LIGHT_NODE],i=n[l.DIRECTIONAL_LIGHT_NODE],u=n[l.POINT_LIGHT_NODE],o=n[l.SPOT_LIGHT_NODE],s=n[l.NODE],c=S.create(this.manager,this.state);c.useCamera(r[0]),c.useLights(a,i,u,o),c.useNodes(s)}},{key:"animate",value:function(t){t(),requestAnimationFrame(this.animate.bind(this,t))}},{key:"resize",value:function(){var t=this.canvas.width=this.canvas.clientWidth,e=this.canvas.height=this.canvas.clientHeight;this.state.viewport(0,0,t,e)}},{key:"dispose",value:function(){this.state.disposeContext()}}]),t}(),U=n(174),O=function(){function t(e,n,r,i){a()(this,t),this.elements=[e,n,r,i]}return u()(t,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new t(e,n,r,a)}}]),u()(t,[{key:"get",value:function(){return this.elements}},{key:"getX",value:function(){return this.elements[0]}},{key:"getY",value:function(){return this.elements[1]}},{key:"getZ",value:function(){return this.elements[2]}},{key:"getXYZ",value:function(){var t=this.elements;return[t[0],t[1],t[2]]}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.elements[3];this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=r}},{key:"add",value:function(t){var e=t.elements;return this.elements[0]=this.elements[0]+e[0],this.elements[1]=this.elements[1]+e[1],this.elements[2]=this.elements[2]+e[2],this}},{key:"sub",value:function(t){var e=t.elements;return this.elements[0]=this.elements[0]-e[0],this.elements[1]=this.elements[1]-e[1],this.elements[2]=this.elements[2]-e[2],this}},{key:"transformQuad",value:function(t){return U.vec4.transformQuat(this.elements,this.elements,t.elements),this}},{key:"rotateX",value:function(t,e){var n=this.elements,r=this.getXYZ();U.vec3.rotateX(n,r,t.elements,e)}},{key:"scale",value:function(t){return U.vec4.scale(this.elements,this.elements,t),this}},{key:"length",value:function(){return U.vec4.length(this.elements)}},{key:"normalize",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],a=e*e+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e*a,t[1]=n*a,t[2]=r*a,this}},{key:"cross",value:function(t){return U.vec3.cross(this.elements,this.elements,t.elements),this}},{key:"copy",value:function(t){return this.elements=t.elements.concat(),this}},{key:"dot",value:function(t){var e=this.elements,n=t.elements;return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}},{key:"transformMat4",value:function(t){return U.vec4.transformMat4(this.elements,this.elements,t.elements),this}},{key:"transformQuat",value:function(t){return U.vec4.transformQuat(this.elements,this.elements,t.elements),this}},{key:"clone",value:function(){var e=t.create();return e.elements=this.elements.concat(),e}}]),t}(),C=function(){function t(e,n,r,i){a()(this,t),this.elements=[e,n,r,i]}return u()(t,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new t(e,n,r,a)}}]),u()(t,[{key:"get",value:function(){return this.elements}},{key:"getX",value:function(){return this.elements[0]}},{key:"getY",value:function(){return this.elements[1]}},{key:"getZ",value:function(){return this.elements[2]}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.elements[3];this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=r}}]),t}(),D=n(59),P=n.n(D),B=function(){function t(e,n,r,i){a()(this,t),this.elements=[e,n,r,i]}return u()(t,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new t(e,n,r,a)}}]),u()(t,[{key:"get",value:function(){return this.elements}},{key:"getX",value:function(){return this.elements[0]}},{key:"getY",value:function(){return this.elements[1]}},{key:"getZ",value:function(){return this.elements[2]}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.elements[3];this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=r}},{key:"fromEuler",value:function(t){U.quat.fromEuler.apply(U.quat,[this.elements].concat(P()(t.get())))}},{key:"rotationX",value:function(t){U.quat.rotateX(this.elements,this.elements,t)}},{key:"rotationY",value:function(t){U.quat.rotateY(this.elements,this.elements,t)}},{key:"rotationZ",value:function(t){U.quat.rotateZ(this.elements,this.elements,t)}},{key:"rotateAroundAxis",value:function(t,e){U.quat2.rotateAroundAxis(this.elements,this.elements,t.elements,e),this.elements.length=4}},{key:"setAxisAngle",value:function(t,e){U.quat.setAxisAngle(this.elements,t.elements,e)}}]),t}(),y=function(){function t(e,n,r,i){a()(this,t),this.elements=[e,n,r,i]}return u()(t,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new t(e,n,r,a)}}]),u()(t,[{key:"get",value:function(){return this.elements}},{key:"set",value:function(t,e,n,r){this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=r}}]),t}(),p=function(){function t(){a()(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return u()(t,[{key:"perspective",value:function(t,e,n,r){U.mat4.perspective(this.elements,t,e,n,r)}},{key:"updateByTransform",value:function(t,e,n){U.mat4.fromRotationTranslationScale(this.elements,e,t,n)}},{key:"getTranslation",value:function(){var t=O.create();return U.mat4.getTranslation(t.elements,this.elements),t}},{key:"getQuaternion",value:function(){var t=C.create();return U.mat4.getRotation(t.elements,this.elements),t}},{key:"getScaling",value:function(){var t=y.create();return U.mat4.getScaling(t.elements,this.elements),t}},{key:"lookAt",value:function(t,e,n){var r=t.clone().sub(e).normalize(),a=n.clone().cross(r).normalize(),i=r.clone().cross(a),u=-a.clone().dot(t),o=-i.clone().dot(t),s=-r.clone().dot(t);this.elements=[a.getX(),i.getX(),r.getX(),0,a.getY(),i.getY(),r.getY(),0,a.getZ(),i.getZ(),r.getZ(),0,u,o,s,1]}},{key:"fromValues",value:function(t,e,n,r,a,i,u,o,s,c,h,l,E,f,_,T){this.elements=U.mat4.fromValues(t,e,n,r,a,i,u,o,s,c,h,l,E,f,_,T)}}]),t}(),b=function(){function t(){a()(this,t),this.elements=[1,0,0,0,1,0,0,0,1]}return u()(t,[{key:"normalFromMat4",value:function(t){return U.mat3.normalFromMat4(this.elements,t.elements),this}}]),t}(),G=function t(){a()(this,t)};h()(G,"DEG2RAD",Math.PI/180),h()(G,"RAD2DEG",180/Math.PI),h()(G,"generateUUID",function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,a=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&a]+t[a>>8&255]+t[a>>16&255]+t[a>>24&255]).toUpperCase()}}()),h()(G,"clamp",(function(t,e,n){return Math.max(e,Math.min(n,t))})),h()(G,"euclideanModulo",(function(t,e){return(t%e+e)%e})),h()(G,"mapLinear",(function(t,e,n,r,a){return r+(t-e)*(a-r)/(n-e)})),h()(G,"lerp",(function(t,e,n){return(1-n)*t+n*e})),h()(G,"smoothstep",(function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)})),h()(G,"smootherstep",(function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)})),h()(G,"randInt",(function(t,e){return t+Math.floor(Math.random()*(e-t+1))})),h()(G,"randFloat",(function(t,e){return t+Math.random()*(e-t)})),h()(G,"randFloatSpread",(function(t){return t*(.5-Math.random())})),h()(G,"degToRad",(function(t){return t*G.DEG2RAD})),h()(G,"radToDeg",(function(t){return t*G.RAD2DEG})),h()(G,"isPowerOfTwo",(function(t){return 0==(t&t-1)&&0!==t})),h()(G,"ceilPowerOfTwo",(function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))})),h()(G,"floorPowerOfTwo",(function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}));var k=function t(){a()(this,t)};h()(k,"PROJECTION","projection"),h()(k,"MODEL","model"),h()(k,"VIEW","view"),h()(k,"NORMAL_MATRIX","normalMatrix"),h()(k,"DIFFUSE","diffuse"),h()(k,"SPECULAR","specular"),h()(k,"SHININESS","shininess"),h()(k,"EYE","eye"),h()(k,"POINT_LIGHTS","point_lights");var X=function t(e,n,r,i){a()(this,t),this.name=e,this.data=n,this.type=r,this.code=i},x=function(){function t(){a()(this,t)}return u()(t,null,[{key:"createByMat3",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new X(t,e.elements,A.MAT3,n)}},{key:"createByMat4",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new X(t,e.elements,A.MAT4,n)}},{key:"createByVec3",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new X(t,e,A.VEC3,n)}},{key:"createByVec4",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new X(t,e,A.VEC4,n)}},{key:"createByFloat",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return new X(t,e,A.FLOAT,n)}}]),t}(),H=function(){function t(){a()(this,t),this.id=G.generateUUID(),this.type=l.NODE,this.visible=!0,this.translation=O.create(),this.rotation=C.create(),this.quaternion=B.create(),this.scale=y.create(),this.up=O.create(0,1,0),this.matrix=new p,this.normalMatrix=new b,this.mesh=null,this.material=null,this._attributes={},this._caps={},this._uniforms={},this._children=[]}return u()(t,null,[{key:"create",value:function(e){var n=new t;return e.nodes[n.id]=n,new t}}]),u()(t,[{key:"setMesh",value:function(t){this._attributes=t.getAttributes(),this.mesh=t}},{key:"setMaterial",value:function(t){this.material=t}},{key:"getUniforms",value:function(){var t=this.material.getUniforms();for(var e in t)this._uniforms[e]=t[e];return this._uniforms[k.MODEL]=x.createByMat4(k.MODEL,this.matrix),this._uniforms[k.NORMAL_MATRIX]=x.createByMat3(k.NORMAL_MATRIX,this.normalMatrix),this._uniforms}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getIndices",value:function(){return this.mesh?this.mesh.indices:null}},{key:"getCaps",value:function(){return this.material.getCaps()}},{key:"getShaderId",value:function(){return this._shaderId=Object.keys(Object.assign({},this.getUniforms(),this.getAttributes())).toString(),this._shaderId}},{key:"getMaterialType",value:function(){return this.material?this.material.type:M.BASE}},{key:"addChild",value:function(){var t;(t=this._children).push.apply(t,arguments)}},{key:"getChildren",value:function(){return this._children}},{key:"traverse",value:function(t){this._children.forEach((function(e){t(e),e.traverse(t)}))}},{key:"updateMatrix",value:function(){this.matrix.updateByTransform(this.translation.get(),this.quaternion.get(),this.scale.get()),this.normalMatrix.normalFromMat4(this.matrix)}},{key:"updateTransformFromMatrix",value:function(){this.rotation.elements=this.matrix.getRotation().elements,this.translation.elements=this.matrix.getTranslation().elements,this.scale.elements=this.matrix.getScaling().elements}},{key:"lookAt",value:function(t){this.matrix.lookAt(this.translation,t,this.up)}}]),t}(),w=n(47),V=n.n(w),Y=n(48),q=n.n(Y),W=n(49),K=n.n(W),Z=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=l.CAMERA_NODE,t.camera=rt.create(),t.visible=!1,t}return K()(e,t),u()(e,null,[{key:"create",value:function(t){return new e}}]),u()(e,[{key:"getUniforms",value:function(){return this._uniforms[k.PROJECTION]=x.createByMat4(k.PROJECTION,this.camera.getProjection()),this._uniforms[k.VIEW]=x.createByMat4(k.VIEW,this.matrix),this._uniforms[k.EYE]=x.createByVec3(k.EYE,this.translation.getXYZ()),this._uniforms}},{key:"perspective",value:function(t,e,n,r){this.camera.projection.perspective(t,e,n,r)}}]),e}(H),z=function(){function t(e,n,r,i){a()(this,t),this.elements=[e,n,r,i]}return u()(t,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new t(e,n,r,a)}}]),u()(t,[{key:"get",value:function(){return this.elements}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.elements[3];this.elements[0]=t,this.elements[1]=e,this.elements[2]=n,this.elements[3]=r}}]),t}(),j=function t(){a()(this,t),this.color=z.create(1,0,0,1),this.position=z.create(0,0,0,1)},Q=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).diffuse=z.create(1,1,1,1),t.intensity=.2,t}return K()(e,t),u()(e,null,[{key:"create",value:function(){return new e}}]),e}(j),J=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=l.AMBIENT_LIGHT_NODE,t.light=Q.create(),t.visible=!1,t}return K()(e,t),u()(e,null,[{key:"create",value:function(t){return new e}}]),u()(e,[{key:"getUniforms",value:function(t){var e=this._uniforms,n=this.light,r="ambientLights[".concat(t,"]"),a="".concat(r,".diffuse"),i="".concat(r,".intensity");return e[a]=x.createByVec4(a,n.diffuse.get()),e[i]=x.createByFloat(i,n.intensity),e}}]),e}(H),$=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).diffuse=z.create(1,1,1,1),t.specular=z.create(1,1,1,1),t.dir=O.create(-1,-.25,-.5),t.intensity=.7,t}return K()(e,t),u()(e,null,[{key:"create",value:function(){return new e}}]),e}(j),tt=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=l.DIRECTIONAL_LIGHT_NODE,t.light=$.create(),t.visible=!1,t}return K()(e,t),u()(e,null,[{key:"create",value:function(t){return new e}}]),u()(e,[{key:"getUniforms",value:function(t){var e=this._uniforms,n=this.light,r="directionalLights[".concat(t,"]"),a="".concat(r,".diffuse"),i="".concat(r,".specular"),u="".concat(r,".dir"),o="".concat(r,".intensity");return e[a]=x.createByVec4(a,n.diffuse.get()),e[i]=x.createByVec4(i,n.specular.get()),e[u]=x.createByVec3(u,n.dir.getXYZ()),e[o]=x.createByFloat(o,n.intensity),e}}]),e}(H),et=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).diffuse=z.create(1,1,1,1),t.specular=z.create(.1,.1,.1,1),t.constant=1,t.linear=.09,t.quadratic=.032,t.intensity=1,t}return K()(e,t),u()(e,null,[{key:"create",value:function(){return new e}}]),e}(j),nt=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=l.POINT_LIGHT_NODE,t.light=et.create(),t.visible=!1,t}return K()(e,t),u()(e,null,[{key:"create",value:function(t){return new e}}]),u()(e,[{key:"getUniforms",value:function(t){var e=this._uniforms,n=this.light,r="pointLights[".concat(t,"]"),a="".concat(r,".diffuse"),i="".concat(r,".specular"),u="".concat(r,".position"),o="".concat(r,".constant"),s="".concat(r,".linear"),c="".concat(r,".quadratic"),h="".concat(r,".intensity");return e[a]=x.createByVec4(a,n.diffuse.get()),e[i]=x.createByVec4(i,n.specular.get()),e[u]=x.createByVec3(u,this.translation.getXYZ()),e[o]=x.createByFloat(o,n.constant),e[s]=x.createByFloat(s,n.linear),e[c]=x.createByFloat(c,n.quadratic),e[h]=x.createByFloat(h,n.intensity),e}}]),e}(H),rt=function(){function t(){a()(this,t),this.projection=new p}return u()(t,null,[{key:"create",value:function(){return new t}}]),u()(t,[{key:"getProjection",value:function(){return this.projection}}]),t}(),at=function(){function t(){a()(this,t),this.cameras={},this.nodes={},this.pointLights={},this.cameras={},this._rootNode=null}return u()(t,null,[{key:"create",value:function(){var e=new t,n=new H;return e._rootNode=n,e.nodes[n.id]=n,e}}]),u()(t,[{key:"getRootNode",value:function(){return this._rootNode}}]),t}(),it=function(){function t(){a()(this,t),this.programInfos={},this.vaos={}}return u()(t,null,[{key:"create",value:function(){return new t}}]),t}(),ut=function t(){a()(this,t)};h()(ut,"POSITION","position"),h()(ut,"NORMAL","normal"),h()(ut,"UV","uv"),h()(ut,"INDEX","index");var ot=function(){function t(){a()(this,t),this.id=G.generateUUID(),this.attributes={},this.indices=null}return u()(t,null,[{key:"create",value:function(){return new t}}]),u()(t,[{key:"addAttribute",value:function(t){this.attributes[t.name]=t}},{key:"addIndices",value:function(t){this.indices=t,this.vertexLength=t.data.length}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getIndices",value:function(){return this.indices}},{key:"reset",value:function(){this.attributes={},this.indices=null}}]),t}(),st=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;a()(this,t),this.name=e,this.data=n,this.componentL=r},ct=function(t){function e(t,n,r){var i;return a()(this,e),(i=V()(this,q()(e).call(this))).length=t,i.width=n,i.height=r,i}return K()(e,t),u()(e,null,[{key:"create",value:function(t,n,r){var a=new e(t,n,r);return a.update(),a}}]),u()(e,[{key:"update",value:function(){this.reset();var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t/2||(void 0).length/2,a=e/2||(void 0).width/2,i=n/2||(void 0).height/2,u=[-a,-i,r],o=[a,-i,r],s=[a,i,r],c=[-a,i,r],h=[-a,-i,-r],l=[a,-i,-r],E=[a,i,-r],f=[-a,i,-r],_=[].concat(u,o,s,c,h,f,E,l,c,s,E,f,u,h,l,o,o,l,E,s,u,c,f,h),T=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],M=[0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1];return{position:_,uv:M,normal:T,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}}(this.length,this.width,this.height),e=new st(ut.POSITION,new Float32Array(t.position)),n=new st(ut.UV,new Float32Array(t.uv),2),r=new st(ut.NORMAL,new Float32Array(t.normal),3),a=new st(ut.INDEX,new Int16Array(t.indices));this.addAttribute(e),this.addAttribute(r),this.addAttribute(n),this.addIndices(a)}}]),e}(ot),ht=function(t){function e(t,n){var r;return a()(this,e),(r=V()(this,q()(e).call(this))).length=t,r.width=n,r}return K()(e,t),u()(e,null,[{key:"create",value:function(t,n){var r=new e(t,n);return r.update(),r}}]),u()(e,[{key:"update",value:function(){this.reset();var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t/2||(void 0).length/2,r=e/2||(void 0).width/2,a=[-r,0,n,r,0,n,r,0,-n,-r,0,-n],i=[0,1,0,0,1,0,0,1,0,0,1,0],u=[0,0,1,0,1,1,0,1],o=[0,1,2,0,2,3];return{position:a,uv:u,normal:i,indices:o}}(this.length,this.width),e=new st(ut.POSITION,new Float32Array(t.position)),n=new st(ut.UV,new Float32Array(t.uv),2),r=new st(ut.NORMAL,new Float32Array(t.normal),3),a=new st(ut.INDEX,new Int16Array(t.indices));this.addAttribute(e),this.addAttribute(r),this.addAttribute(n),this.addIndices(a)}}]),e}(ot),lt=function t(){a()(this,t)};h()(lt,"READ_BUFFER",3074),h()(lt,"UNPACK_ROW_LENGTH",3314),h()(lt,"UNPACK_SKIP_ROWS",3315),h()(lt,"UNPACK_SKIP_PIXELS",3316),h()(lt,"PACK_ROW_LENGTH",3330),h()(lt,"PACK_SKIP_ROWS",3331),h()(lt,"PACK_SKIP_PIXELS",3332),h()(lt,"COLOR",6144),h()(lt,"DEPTH",6145),h()(lt,"STENCIL",6146),h()(lt,"RED",6403),h()(lt,"RGB8",32849),h()(lt,"RGBA8",32856),h()(lt,"RGB10_A2",32857),h()(lt,"TEXTURE_BINDING_3D",32874),h()(lt,"UNPACK_SKIP_IMAGES",32877),h()(lt,"UNPACK_IMAGE_HEIGHT",32878),h()(lt,"TEXTURE_3D",32879),h()(lt,"TEXTURE_WRAP_R",32882),h()(lt,"MAX_3D_TEXTURE_SIZE",32883),h()(lt,"UNSIGNED_INT_2_10_10_10_REV",33640),h()(lt,"MAX_ELEMENTS_VERTICES",33e3),h()(lt,"MAX_ELEMENTS_INDICES",33001),h()(lt,"TEXTURE_MIN_LOD",33082),h()(lt,"TEXTURE_MAX_LOD",33083),h()(lt,"TEXTURE_BASE_LEVEL",33084),h()(lt,"TEXTURE_MAX_LEVEL",33085),h()(lt,"MIN",32775),h()(lt,"MAX",32776),h()(lt,"DEPTH_COMPONENT24",33190),h()(lt,"MAX_TEXTURE_LOD_BIAS",34045),h()(lt,"TEXTURE_COMPARE_MODE",34892),h()(lt,"TEXTURE_COMPARE_FUNC",34893),h()(lt,"CURRENT_QUERY",34917),h()(lt,"QUERY_RESULT",34918),h()(lt,"QUERY_RESULT_AVAILABLE",34919),h()(lt,"STREAM_READ",35041),h()(lt,"STREAM_COPY",35042),h()(lt,"STATIC_READ",35045),h()(lt,"STATIC_COPY",35046),h()(lt,"DYNAMIC_READ",35049),h()(lt,"DYNAMIC_COPY",35050),h()(lt,"MAX_DRAW_BUFFERS",34852),h()(lt,"DRAW_BUFFER0",34853),h()(lt,"DRAW_BUFFER1",34854),h()(lt,"DRAW_BUFFER2",34855),h()(lt,"DRAW_BUFFER3",34856),h()(lt,"DRAW_BUFFER4",34857),h()(lt,"DRAW_BUFFER5",34858),h()(lt,"DRAW_BUFFER6",34859),h()(lt,"DRAW_BUFFER7",34860),h()(lt,"DRAW_BUFFER8",34861),h()(lt,"DRAW_BUFFER9",34862),h()(lt,"DRAW_BUFFER10",34863),h()(lt,"DRAW_BUFFER11",34864),h()(lt,"DRAW_BUFFER12",34865),h()(lt,"DRAW_BUFFER13",34866),h()(lt,"DRAW_BUFFER14",34867),h()(lt,"DRAW_BUFFER15",34868),h()(lt,"MAX_FRAGMENT_UNIFORM_COMPONENTS",35657),h()(lt,"MAX_VERTEX_UNIFORM_COMPONENTS",35658),h()(lt,"SAMPLER_3D",35679),h()(lt,"SAMPLER_2D_SHADOW",35682),h()(lt,"FRAGMENT_SHADER_DERIVATIVE_HINT",35723),h()(lt,"PIXEL_PACK_BUFFER",35051),h()(lt,"PIXEL_UNPACK_BUFFER",35052),h()(lt,"PIXEL_PACK_BUFFER_BINDING",35053),h()(lt,"PIXEL_UNPACK_BUFFER_BINDING",35055),h()(lt,"FLOAT_MAT2x3",35685),h()(lt,"FLOAT_MAT2x4",35686),h()(lt,"FLOAT_MAT3x2",35687),h()(lt,"FLOAT_MAT3x4",35688),h()(lt,"FLOAT_MAT4x2",35689),h()(lt,"FLOAT_MAT4x3",35690),h()(lt,"SRGB",35904),h()(lt,"SRGB8",35905),h()(lt,"SRGB8_ALPHA8",35907),h()(lt,"COMPARE_REF_TO_TEXTURE",34894),h()(lt,"RGBA32F",34836),h()(lt,"RGB32F",34837),h()(lt,"RGBA16F",34842),h()(lt,"RGB16F",34843),h()(lt,"VERTEX_ATTRIB_ARRAY_INTEGER",35069),h()(lt,"MAX_ARRAY_TEXTURE_LAYERS",35071),h()(lt,"MIN_PROGRAM_TEXEL_OFFSET",35076),h()(lt,"MAX_PROGRAM_TEXEL_OFFSET",35077),h()(lt,"MAX_VARYING_COMPONENTS",35659),h()(lt,"TEXTURE_2D_ARRAY",35866),h()(lt,"TEXTURE_BINDING_2D_ARRAY",35869),h()(lt,"R11F_G11F_B10F",35898),h()(lt,"UNSIGNED_INT_10F_11F_11F_REV",35899),h()(lt,"RGB9_E5",35901),h()(lt,"UNSIGNED_INT_5_9_9_9_REV",35902),h()(lt,"TRANSFORM_FEEDBACK_BUFFER_MODE",35967),h()(lt,"MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",35968),h()(lt,"TRANSFORM_FEEDBACK_VARYINGS",35971),h()(lt,"TRANSFORM_FEEDBACK_BUFFER_START",35972),h()(lt,"TRANSFORM_FEEDBACK_BUFFER_SIZE",35973),h()(lt,"TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",35976),h()(lt,"RASTERIZER_DISCARD",35977),h()(lt,"MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",35978),h()(lt,"MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",35979),h()(lt,"INTERLEAVED_ATTRIBS",35980),h()(lt,"SEPARATE_ATTRIBS",35981),h()(lt,"TRANSFORM_FEEDBACK_BUFFER",35982),h()(lt,"TRANSFORM_FEEDBACK_BUFFER_BINDING",35983),h()(lt,"RGBA32UI",36208),h()(lt,"RGB32UI",36209),h()(lt,"RGBA16UI",36214),h()(lt,"RGB16UI",36215),h()(lt,"RGBA8UI",36220),h()(lt,"RGB8UI",36221),h()(lt,"RGBA32I",36226),h()(lt,"RGB32I",36227),h()(lt,"RGBA16I",36232),h()(lt,"RGB16I",36233),h()(lt,"RGBA8I",36238),h()(lt,"RGB8I",36239),h()(lt,"RED_INTEGER",36244),h()(lt,"RGB_INTEGER",36248),h()(lt,"RGBA_INTEGER",36249),h()(lt,"SAMPLER_2D_ARRAY",36289),h()(lt,"SAMPLER_2D_ARRAY_SHADOW",36292),h()(lt,"SAMPLER_CUBE_SHADOW",36293),h()(lt,"UNSIGNED_INT_VEC2",36294),h()(lt,"UNSIGNED_INT_VEC3",36295),h()(lt,"UNSIGNED_INT_VEC4",36296),h()(lt,"INT_SAMPLER_2D",36298),h()(lt,"INT_SAMPLER_3D",36299),h()(lt,"INT_SAMPLER_CUBE",36300),h()(lt,"INT_SAMPLER_2D_ARRAY",36303),h()(lt,"UNSIGNED_INT_SAMPLER_2D",36306),h()(lt,"UNSIGNED_INT_SAMPLER_3D",36307),h()(lt,"UNSIGNED_INT_SAMPLER_CUBE",36308),h()(lt,"UNSIGNED_INT_SAMPLER_2D_ARRAY",36311),h()(lt,"DEPTH_COMPONENT32F",36012),h()(lt,"DEPTH32F_STENCIL8",36013),h()(lt,"FLOAT_32_UNSIGNED_INT_24_8_REV",36269),h()(lt,"FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",33296),h()(lt,"FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",33297),h()(lt,"FRAMEBUFFER_ATTACHMENT_RED_SIZE",33298),h()(lt,"FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",33299),h()(lt,"FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",33300),h()(lt,"FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",33301),h()(lt,"FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",33302),h()(lt,"FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",33303),h()(lt,"FRAMEBUFFER_DEFAULT",33304),h()(lt,"UNSIGNED_INT_24_8",34042),h()(lt,"DEPTH24_STENCIL8",35056),h()(lt,"UNSIGNED_NORMALIZED",35863),h()(lt,"DRAW_FRAMEBUFFER_BINDING",36006),h()(lt,"READ_FRAMEBUFFER",36008),h()(lt,"DRAW_FRAMEBUFFER",36009),h()(lt,"READ_FRAMEBUFFER_BINDING",36010),h()(lt,"RENDERBUFFER_SAMPLES",36011),h()(lt,"FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",36052),h()(lt,"MAX_COLOR_ATTACHMENTS",36063),h()(lt,"COLOR_ATTACHMENT1",36065),h()(lt,"COLOR_ATTACHMENT2",36066),h()(lt,"COLOR_ATTACHMENT3",36067),h()(lt,"COLOR_ATTACHMENT4",36068),h()(lt,"COLOR_ATTACHMENT5",36069),h()(lt,"COLOR_ATTACHMENT6",36070),h()(lt,"COLOR_ATTACHMENT7",36071),h()(lt,"COLOR_ATTACHMENT8",36072),h()(lt,"COLOR_ATTACHMENT9",36073),h()(lt,"COLOR_ATTACHMENT10",36074),h()(lt,"COLOR_ATTACHMENT11",36075),h()(lt,"COLOR_ATTACHMENT12",36076),h()(lt,"COLOR_ATTACHMENT13",36077),h()(lt,"COLOR_ATTACHMENT14",36078),h()(lt,"COLOR_ATTACHMENT15",36079),h()(lt,"FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",36182),h()(lt,"MAX_SAMPLES",36183),h()(lt,"HALF_FLOAT",5131),h()(lt,"RG",33319),h()(lt,"RG_INTEGER",33320),h()(lt,"R8",33321),h()(lt,"RG8",33323),h()(lt,"R16F",33325),h()(lt,"R32F",33326),h()(lt,"RG16F",33327),h()(lt,"RG32F",33328),h()(lt,"R8I",33329),h()(lt,"R8UI",33330),h()(lt,"R16I",33331),h()(lt,"R16UI",33332),h()(lt,"R32I",33333),h()(lt,"R32UI",33334),h()(lt,"RG8I",33335),h()(lt,"RG8UI",33336),h()(lt,"RG16I",33337),h()(lt,"RG16UI",33338),h()(lt,"RG32I",33339),h()(lt,"RG32UI",33340),h()(lt,"VERTEX_ARRAY_BINDING",34229),h()(lt,"R8_SNORM",36756),h()(lt,"RG8_SNORM",36757),h()(lt,"RGB8_SNORM",36758),h()(lt,"RGBA8_SNORM",36759),h()(lt,"SIGNED_NORMALIZED",36764),h()(lt,"COPY_READ_BUFFER",36662),h()(lt,"COPY_WRITE_BUFFER",36663),h()(lt,"COPY_READ_BUFFER_BINDING",36662),h()(lt,"COPY_WRITE_BUFFER_BINDING",36663),h()(lt,"UNIFORM_BUFFER",35345),h()(lt,"UNIFORM_BUFFER_BINDING",35368),h()(lt,"UNIFORM_BUFFER_START",35369),h()(lt,"UNIFORM_BUFFER_SIZE",35370),h()(lt,"MAX_VERTEX_UNIFORM_BLOCKS",35371),h()(lt,"MAX_FRAGMENT_UNIFORM_BLOCKS",35373),h()(lt,"MAX_COMBINED_UNIFORM_BLOCKS",35374),h()(lt,"MAX_UNIFORM_BUFFER_BINDINGS",35375),h()(lt,"MAX_UNIFORM_BLOCK_SIZE",35376),h()(lt,"MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",35377),h()(lt,"MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",35379),h()(lt,"UNIFORM_BUFFER_OFFSET_ALIGNMENT",35380),h()(lt,"ACTIVE_UNIFORM_BLOCKS",35382),h()(lt,"UNIFORM_TYPE",35383),h()(lt,"UNIFORM_SIZE",35384),h()(lt,"UNIFORM_BLOCK_INDEX",35386),h()(lt,"UNIFORM_OFFSET",35387),h()(lt,"UNIFORM_ARRAY_STRIDE",35388),h()(lt,"UNIFORM_MATRIX_STRIDE",35389),h()(lt,"UNIFORM_IS_ROW_MAJOR",35390),h()(lt,"UNIFORM_BLOCK_BINDING",35391),h()(lt,"UNIFORM_BLOCK_DATA_SIZE",35392),h()(lt,"UNIFORM_BLOCK_ACTIVE_UNIFORMS",35394),h()(lt,"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",35395),h()(lt,"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",35396),h()(lt,"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",35398),h()(lt,"INVALID_INDEX",4294967295),h()(lt,"MAX_VERTEX_OUTPUT_COMPONENTS",37154),h()(lt,"MAX_FRAGMENT_INPUT_COMPONENTS",37157),h()(lt,"MAX_SERVER_WAIT_TIMEOUT",37137),h()(lt,"OBJECT_TYPE",37138),h()(lt,"SYNC_CONDITION",37139),h()(lt,"SYNC_STATUS",37140),h()(lt,"SYNC_FLAGS",37141),h()(lt,"SYNC_FENCE",37142),h()(lt,"SYNC_GPU_COMMANDS_COMPLETE",37143),h()(lt,"UNSIGNALED",37144),h()(lt,"SIGNALED",37145),h()(lt,"ALREADY_SIGNALED",37146),h()(lt,"TIMEOUT_EXPIRED",37147),h()(lt,"CONDITION_SATISFIED",37148),h()(lt,"WAIT_FAILED",37149),h()(lt,"SYNC_FLUSH_COMMANDS_BIT",1),h()(lt,"VERTEX_ATTRIB_ARRAY_DIVISOR",35070),h()(lt,"ANY_SAMPLES_PASSED",35887),h()(lt,"ANY_SAMPLES_PASSED_CONSERVATIVE",36202),h()(lt,"SAMPLER_BINDING",35097),h()(lt,"RGB10_A2UI",36975),h()(lt,"INT_2_10_10_10_REV",36255),h()(lt,"TRANSFORM_FEEDBACK",36386),h()(lt,"TRANSFORM_FEEDBACK_PAUSED",36387),h()(lt,"TRANSFORM_FEEDBACK_ACTIVE",36388),h()(lt,"TRANSFORM_FEEDBACK_BINDING",36389),h()(lt,"TEXTURE_IMMUTABLE_FORMAT",37167),h()(lt,"MAX_ELEMENT_INDEX",36203),h()(lt,"TEXTURE_IMMUTABLE_LEVELS",33503),h()(lt,"TIMEOUT_IGNORED",-1),h()(lt,"MAX_CLIENT_WAIT_TIMEOUT_WEBGL",37447),h()(lt,"DEPTH_BUFFER_BIT",256),h()(lt,"STENCIL_BUFFER_BIT",1024),h()(lt,"COLOR_BUFFER_BIT",16384),h()(lt,"POINTS",0),h()(lt,"LINES",1),h()(lt,"LINE_LOOP",2),h()(lt,"LINE_STRIP",3),h()(lt,"TRIANGLES",4),h()(lt,"TRIANGLE_STRIP",5),h()(lt,"TRIANGLE_FAN",6),h()(lt,"ZERO",0),h()(lt,"ONE",1),h()(lt,"SRC_COLOR",768),h()(lt,"ONE_MINUS_SRC_COLOR",769),h()(lt,"SRC_ALPHA",770),h()(lt,"ONE_MINUS_SRC_ALPHA",771),h()(lt,"DST_ALPHA",772),h()(lt,"ONE_MINUS_DST_ALPHA",773),h()(lt,"DST_COLOR",774),h()(lt,"ONE_MINUS_DST_COLOR",775),h()(lt,"SRC_ALPHA_SATURATE",776),h()(lt,"FUNC_ADD",32774),h()(lt,"BLEND_EQUATION",32777),h()(lt,"BLEND_EQUATION_RGB",32777),h()(lt,"BLEND_EQUATION_ALPHA",34877),h()(lt,"FUNC_SUBTRACT",32778),h()(lt,"FUNC_REVERSE_SUBTRACT",32779),h()(lt,"BLEND_DST_RGB",32968),h()(lt,"BLEND_SRC_RGB",32969),h()(lt,"BLEND_DST_ALPHA",32970),h()(lt,"BLEND_SRC_ALPHA",32971),h()(lt,"CONSTANT_COLOR",32769),h()(lt,"ONE_MINUS_CONSTANT_COLOR",32770),h()(lt,"CONSTANT_ALPHA",32771),h()(lt,"ONE_MINUS_CONSTANT_ALPHA",32772),h()(lt,"BLEND_COLOR",32773),h()(lt,"ARRAY_BUFFER",34962),h()(lt,"ELEMENT_ARRAY_BUFFER",34963),h()(lt,"ARRAY_BUFFER_BINDING",34964),h()(lt,"ELEMENT_ARRAY_BUFFER_BINDING",34965),h()(lt,"STREAM_DRAW",35040),h()(lt,"STATIC_DRAW",35044),h()(lt,"DYNAMIC_DRAW",35048),h()(lt,"BUFFER_SIZE",34660),h()(lt,"BUFFER_USAGE",34661),h()(lt,"CURRENT_VERTEX_ATTRIB",34342),h()(lt,"FRONT",1028),h()(lt,"BACK",1029),h()(lt,"FRONT_AND_BACK",1032),h()(lt,"TEXTURE_2D",3553),h()(lt,"CULL_FACE",2884),h()(lt,"BLEND",3042),h()(lt,"DITHER",3024),h()(lt,"STENCIL_TEST",2960),h()(lt,"DEPTH_TEST",2929),h()(lt,"SCISSOR_TEST",3089),h()(lt,"POLYGON_OFFSET_FILL",32823),h()(lt,"SAMPLE_ALPHA_TO_COVERAGE",32926),h()(lt,"SAMPLE_COVERAGE",32928),h()(lt,"NO_ERROR",0),h()(lt,"INVALID_ENUM",1280),h()(lt,"INVALID_VALUE",1281),h()(lt,"INVALID_OPERATION",1282),h()(lt,"OUT_OF_MEMORY",1285),h()(lt,"CW",2304),h()(lt,"CCW",2305),h()(lt,"LINE_WIDTH",2849),h()(lt,"ALIASED_POINT_SIZE_RANGE",33901),h()(lt,"ALIASED_LINE_WIDTH_RANGE",33902),h()(lt,"CULL_FACE_MODE",2885),h()(lt,"FRONT_FACE",2886),h()(lt,"DEPTH_RANGE",2928),h()(lt,"DEPTH_WRITEMASK",2930),h()(lt,"DEPTH_CLEAR_VALUE",2931),h()(lt,"DEPTH_FUNC",2932),h()(lt,"STENCIL_CLEAR_VALUE",2961),h()(lt,"STENCIL_FUNC",2962),h()(lt,"STENCIL_FAIL",2964),h()(lt,"STENCIL_PASS_DEPTH_FAIL",2965),h()(lt,"STENCIL_PASS_DEPTH_PASS",2966),h()(lt,"STENCIL_REF",2967),h()(lt,"STENCIL_VALUE_MASK",2963),h()(lt,"STENCIL_WRITEMASK",2968),h()(lt,"STENCIL_BACK_FUNC",34816),h()(lt,"STENCIL_BACK_FAIL",34817),h()(lt,"STENCIL_BACK_PASS_DEPTH_FAIL",34818),h()(lt,"STENCIL_BACK_PASS_DEPTH_PASS",34819),h()(lt,"STENCIL_BACK_REF",36003),h()(lt,"STENCIL_BACK_VALUE_MASK",36004),h()(lt,"STENCIL_BACK_WRITEMASK",36005),h()(lt,"VIEWPORT",2978),h()(lt,"SCISSOR_BOX",3088),h()(lt,"COLOR_CLEAR_VALUE",3106),h()(lt,"COLOR_WRITEMASK",3107),h()(lt,"UNPACK_ALIGNMENT",3317),h()(lt,"PACK_ALIGNMENT",3333),h()(lt,"MAX_TEXTURE_SIZE",3379),h()(lt,"MAX_VIEWPORT_DIMS",3386),h()(lt,"SUBPIXEL_BITS",3408),h()(lt,"RED_BITS",3410),h()(lt,"GREEN_BITS",3411),h()(lt,"BLUE_BITS",3412),h()(lt,"ALPHA_BITS",3413),h()(lt,"DEPTH_BITS",3414),h()(lt,"STENCIL_BITS",3415),h()(lt,"POLYGON_OFFSET_UNITS",10752),h()(lt,"POLYGON_OFFSET_FACTOR",32824),h()(lt,"TEXTURE_BINDING_2D",32873),h()(lt,"SAMPLE_BUFFERS",32936),h()(lt,"SAMPLES",32937),h()(lt,"SAMPLE_COVERAGE_VALUE",32938),h()(lt,"SAMPLE_COVERAGE_INVERT",32939),h()(lt,"COMPRESSED_TEXTURE_FORMATS",34467),h()(lt,"DONT_CARE",4352),h()(lt,"FASTEST",4353),h()(lt,"NICEST",4354),h()(lt,"GENERATE_MIPMAP_HINT",33170),h()(lt,"BYTE",5120),h()(lt,"UNSIGNED_BYTE",5121),h()(lt,"SHORT",5122),h()(lt,"UNSIGNED_SHORT",5123),h()(lt,"INT",5124),h()(lt,"UNSIGNED_INT",5125),h()(lt,"FLOAT",5126),h()(lt,"DEPTH_COMPONENT",6402),h()(lt,"ALPHA",6406),h()(lt,"RGB",6407),h()(lt,"RGBA",6408),h()(lt,"LUMINANCE",6409),h()(lt,"LUMINANCE_ALPHA",6410),h()(lt,"UNSIGNED_SHORT_4_4_4_4",32819),h()(lt,"UNSIGNED_SHORT_5_5_5_1",32820),h()(lt,"UNSIGNED_SHORT_5_6_5",33635),h()(lt,"FRAGMENT_SHADER",35632),h()(lt,"VERTEX_SHADER",35633),h()(lt,"MAX_VERTEX_ATTRIBS",34921),h()(lt,"MAX_VERTEX_UNIFORM_VECTORS",36347),h()(lt,"MAX_VARYING_VECTORS",36348),h()(lt,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35661),h()(lt,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35660),h()(lt,"MAX_TEXTURE_IMAGE_UNITS",34930),h()(lt,"MAX_FRAGMENT_UNIFORM_VECTORS",36349),h()(lt,"SHADER_TYPE",35663),h()(lt,"DELETE_STATUS",35712),h()(lt,"LINK_STATUS",35714),h()(lt,"VALIDATE_STATUS",35715),h()(lt,"ATTACHED_SHADERS",35717),h()(lt,"ACTIVE_UNIFORMS",35718),h()(lt,"ACTIVE_ATTRIBUTES",35721),h()(lt,"SHADING_LANGUAGE_VERSION",35724),h()(lt,"CURRENT_PROGRAM",35725),h()(lt,"NEVER",512),h()(lt,"LESS",513),h()(lt,"EQUAL",514),h()(lt,"LEQUAL",515),h()(lt,"GREATER",516),h()(lt,"NOTEQUAL",517),h()(lt,"GEQUAL",518),h()(lt,"ALWAYS",519),h()(lt,"KEEP",7680),h()(lt,"REPLACE",7681),h()(lt,"INCR",7682),h()(lt,"DECR",7683),h()(lt,"INVERT",5386),h()(lt,"INCR_WRAP",34055),h()(lt,"DECR_WRAP",34056),h()(lt,"VENDOR",7936),h()(lt,"RENDERER",7937),h()(lt,"VERSION",7938),h()(lt,"NEAREST",9728),h()(lt,"LINEAR",9729),h()(lt,"NEAREST_MIPMAP_NEAREST",9984),h()(lt,"LINEAR_MIPMAP_NEAREST",9985),h()(lt,"NEAREST_MIPMAP_LINEAR",9986),h()(lt,"LINEAR_MIPMAP_LINEAR",9987),h()(lt,"TEXTURE_MAG_FILTER",10240),h()(lt,"TEXTURE_MIN_FILTER",10241),h()(lt,"TEXTURE_WRAP_S",10242),h()(lt,"TEXTURE_WRAP_T",10243),h()(lt,"TEXTURE",5890),h()(lt,"TEXTURE_CUBE_MAP",34067),h()(lt,"TEXTURE_BINDING_CUBE_MAP",34068),h()(lt,"TEXTURE_CUBE_MAP_POSITIVE_X",34069),h()(lt,"TEXTURE_CUBE_MAP_NEGATIVE_X",34070),h()(lt,"TEXTURE_CUBE_MAP_POSITIVE_Y",34071),h()(lt,"TEXTURE_CUBE_MAP_NEGATIVE_Y",34072),h()(lt,"TEXTURE_CUBE_MAP_POSITIVE_Z",34073),h()(lt,"TEXTURE_CUBE_MAP_NEGATIVE_Z",34074),h()(lt,"MAX_CUBE_MAP_TEXTURE_SIZE",34076),h()(lt,"TEXTURE0",33984),h()(lt,"TEXTURE1",33985),h()(lt,"TEXTURE2",33986),h()(lt,"TEXTURE3",33987),h()(lt,"TEXTURE4",33988),h()(lt,"TEXTURE5",33989),h()(lt,"TEXTURE6",33990),h()(lt,"TEXTURE7",33991),h()(lt,"TEXTURE8",33992),h()(lt,"TEXTURE9",33993),h()(lt,"TEXTURE10",33994),h()(lt,"TEXTURE11",33995),h()(lt,"TEXTURE12",33996),h()(lt,"TEXTURE13",33997),h()(lt,"TEXTURE14",33998),h()(lt,"TEXTURE15",33999),h()(lt,"TEXTURE16",34e3),h()(lt,"TEXTURE17",34001),h()(lt,"TEXTURE18",34002),h()(lt,"TEXTURE19",34003),h()(lt,"TEXTURE20",34004),h()(lt,"TEXTURE21",34005),h()(lt,"TEXTURE22",34006),h()(lt,"TEXTURE23",34007),h()(lt,"TEXTURE24",34008),h()(lt,"TEXTURE25",34009),h()(lt,"TEXTURE26",34010),h()(lt,"TEXTURE27",34011),h()(lt,"TEXTURE28",34012),h()(lt,"TEXTURE29",34013),h()(lt,"TEXTURE30",34014),h()(lt,"TEXTURE31",34015),h()(lt,"ACTIVE_TEXTURE",34016),h()(lt,"REPEAT",10497),h()(lt,"CLAMP_TO_EDGE",33071),h()(lt,"MIRRORED_REPEAT",33648),h()(lt,"FLOAT_VEC2",35664),h()(lt,"FLOAT_VEC3",35665),h()(lt,"FLOAT_VEC4",35666),h()(lt,"INT_VEC2",35667),h()(lt,"INT_VEC3",35668),h()(lt,"INT_VEC4",35669),h()(lt,"BOOL",35670),h()(lt,"BOOL_VEC2",35671),h()(lt,"BOOL_VEC3",35672),h()(lt,"BOOL_VEC4",35673),h()(lt,"FLOAT_MAT2",35674),h()(lt,"FLOAT_MAT3",35675),h()(lt,"FLOAT_MAT4",35676),h()(lt,"SAMPLER_2D",35678),h()(lt,"SAMPLER_CUBE",35680),h()(lt,"VERTEX_ATTRIB_ARRAY_ENABLED",34338),h()(lt,"VERTEX_ATTRIB_ARRAY_SIZE",34339),h()(lt,"VERTEX_ATTRIB_ARRAY_STRIDE",34340),h()(lt,"VERTEX_ATTRIB_ARRAY_TYPE",34341),h()(lt,"VERTEX_ATTRIB_ARRAY_NORMALIZED",34922),h()(lt,"VERTEX_ATTRIB_ARRAY_POINTER",34373),h()(lt,"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",34975),h()(lt,"IMPLEMENTATION_COLOR_READ_TYPE",35738),h()(lt,"IMPLEMENTATION_COLOR_READ_FORMAT",35739),h()(lt,"COMPILE_STATUS",35713),h()(lt,"LOW_FLOAT",36336),h()(lt,"MEDIUM_FLOAT",36337),h()(lt,"HIGH_FLOAT",36338),h()(lt,"LOW_INT",36339),h()(lt,"MEDIUM_INT",36340),h()(lt,"HIGH_INT",36341),h()(lt,"FRAMEBUFFER",36160),h()(lt,"RENDERBUFFER",36161),h()(lt,"RGBA4",32854),h()(lt,"RGB5_A1",32855),h()(lt,"RGB565",36194),h()(lt,"DEPTH_COMPONENT16",33189),h()(lt,"STENCIL_INDEX8",36168),h()(lt,"DEPTH_STENCIL",34041),h()(lt,"RENDERBUFFER_WIDTH",36162),h()(lt,"RENDERBUFFER_HEIGHT",36163),h()(lt,"RENDERBUFFER_INTERNAL_FORMAT",36164),h()(lt,"RENDERBUFFER_RED_SIZE",36176),h()(lt,"RENDERBUFFER_GREEN_SIZE",36177),h()(lt,"RENDERBUFFER_BLUE_SIZE",36178),h()(lt,"RENDERBUFFER_ALPHA_SIZE",36179),h()(lt,"RENDERBUFFER_DEPTH_SIZE",36180),h()(lt,"RENDERBUFFER_STENCIL_SIZE",36181),h()(lt,"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36048),h()(lt,"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36049),h()(lt,"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36050),h()(lt,"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36051),h()(lt,"COLOR_ATTACHMENT0",36064),h()(lt,"DEPTH_ATTACHMENT",36096),h()(lt,"STENCIL_ATTACHMENT",36128),h()(lt,"DEPTH_STENCIL_ATTACHMENT",33306),h()(lt,"NONE",0),h()(lt,"FRAMEBUFFER_COMPLETE",36053),h()(lt,"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36054),h()(lt,"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36055),h()(lt,"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36057),h()(lt,"FRAMEBUFFER_UNSUPPORTED",36061),h()(lt,"FRAMEBUFFER_BINDING",36006),h()(lt,"RENDERBUFFER_BINDING",36007),h()(lt,"MAX_RENDERBUFFER_SIZE",34024),h()(lt,"INVALID_FRAMEBUFFER_OPERATION",1286),h()(lt,"UNPACK_FLIP_Y_WEBGL",37440),h()(lt,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37441),h()(lt,"CONTEXT_LOST_WEBGL",37442),h()(lt,"UNPACK_COLORSPACE_CONVERSION_WEBGL",37443),h()(lt,"BROWSER_DEFAULT_WEBGL",37444);var Et=function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=M.PHONG,t.diffuse=z.create(),t.specular=z.create(0,0,0,1),t.shininess=32,t.enableLight=!0,t}return K()(e,t),u()(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.diffuse,r=new e;return n&&(r.diffuse=n),r}}]),u()(e,[{key:"getUniforms",value:function(){var t=this._uniforms;return t[k.DIFFUSE]=x.createByVec4(k.DIFFUSE,this.diffuse.get()),t[k.SPECULAR]=x.createByVec4(k.SPECULAR,this.specular.get()),t[k.SHININESS]=x.createByFloat(k.SHININESS,this.shininess),t}}]),e}(function(t){function e(){var t;return a()(this,e),(t=V()(this,q()(e).call(this))).type=M.BASE,t.color=z.create(),t}return K()(e,t),u()(e,null,[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.diffuse,r=new e;return n&&(r.diffuse=n),r}}]),u()(e,[{key:"getUniforms",value:function(){var t=this._uniforms;return t[k.DIFFUSE]=x.createByVec4(k.DIFFUSE,this.diffuse.get()),t}}]),e}(function(){function t(){a()(this,t),this._caps={},this._uniforms={},this.enableLight=!1}return u()(t,null,[{key:"create",value:function(){var t=new this;return t.setCaps(lt.CULL_FACE,lt.BACK),t}}]),u()(t,[{key:"setCaps",value:function(t,e){this._caps[t]=e}},{key:"getUniforms",value:function(){return this._uniforms}}]),t}()));n.d(e,"default",(function(){return ft}));var ft=function(){function t(){a()(this,t),this.canvas=null,this.renderer=null,this.groundPiles=[],this.scene=null,this.camera=null,this.isRun=!1,this.isSetup=!1}return u()(t,[{key:"setUp",value:function(t){var e=this;if(this.isSetup)return this;this.isSetup=!0;var n=Math.PI/3,r=it.create(),a=F.create(r,t),i=at.create(),u=i.getRootNode(),o=Z.create(i);o.perspective(n,1,1,100),o.translation.set(10,10,10),o.lookAt(O.create()),u.addChild(o);var s=nt.create(i);s.translation.set(2,2,2),s.updateMatrix();var c=tt.create(i),h=J.create(i);u.addChild(h,c);var l=Et.create();l.diffuse.set(.5,.5,.5);var E=ht.create(30,30),f=H.create(i);f.setMesh(E),f.setMaterial(l),u.addChild(f);for(var _=Et.create(),T=ct.create(),M=0;M<10;M++){var R=H.create(i);R.setMesh(T),R.setMaterial(_),R.translation.set(2*M-10,.5,0),R.updateMatrix(),u.addChild(R),this.groundPiles.push(R)}return a.render(i),window.addEventListener("resize",(function(){window.test=e,a.resize();var t=a.canvas.clientWidth,r=a.canvas.clientHeight;o.perspective(n,t/r,1,100)}),!1),window.dispatchEvent(new Event("resize")),this.renderer=a,this.scene=i,this.camera=o,this.canvas=t,this}},{key:"run",value:function(){if(!this.isRun){this.isRun=!0;var t=this.renderer,e=this.scene;t.animate((function(){t.render(e)}))}}}]),t}()}}]);